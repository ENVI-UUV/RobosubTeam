{"changed":true,"filter":false,"title":"index.html","tooltip":"/index.html","value":"<!DOCTYPE html>\n\n<html>\n\n<head>\n    <title>Example 09.07 - first person camera </title>\t\t\n    <script src=\"js/three.min.js\"></script>\n    <script src=\"js/loaders/OBJLoader.js\"></script>\n    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/MTLLoader.js\"></script>\n    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/OBJMTLLoader.js\"></script>\n    <script src=\"js/controls/FirstPersonControls.js\"></script>\n\n\n    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/stats.js\"></script>\n    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/dat.gui.js\"></script>\n    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/chroma.js\"></script>\n\n    <style>\n        body {\n            /* set margin to 0 and overflow to hidden, to go fullscreen */\n            margin: 0;\n            overflow: hidden;\n        }\n    </style>\n</head>\n<body>\n\n<div id=\"Stats-output\">\n</div>\n<!-- Div which will hold the Output -->\n<div id=\"WebGL-output\">\n</div>\n\n<!-- Javascript code that runs our Three.js examples -->\n<script type=\"text/javascript\">\n\n    // once everything is loaded, we run our Three.js stuff.\n    function init() {\n\n\n        var clock = new THREE.Clock();\n\n        var stats = initStats();\n\n        // create a scene, that will hold all our elements such as objects, cameras and lights.\n        var scene = new THREE.Scene();\n\n        // create a camera, which defines where we're looking at.\n        var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n\n\n        // create a render and set the size\n        var webGLRenderer = new THREE.WebGLRenderer();\n        webGLRenderer.setClearColor(new THREE.Color(0x000, 1.0));\n        webGLRenderer.setSize(window.innerWidth, window.innerHeight);\n        webGLRenderer.shadowMapEnabled = true;\n\n        // position and point the camera to the center of the scene\n        camera.position.x = 100;\n        camera.position.y = 10;\n        camera.position.z = 10;\n        camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n\n        var camControls = new THREE.FirstPersonControls(camera);\n        camControls.lookSpeed = 0.4;\n        camControls.movementSpeed = 20;\n        camControls.noFly = true;\n        camControls.lookVertical = true;\n        camControls.constrainVertical = true;\n        camControls.verticalMin = 1.0;\n        camControls.verticalMax = 2.0;\n        camControls.lon = -150;\n        camControls.lat = 120;\n\n\n        var ambientLight = new THREE.AmbientLight(0x383838);\n        scene.add(ambientLight);\n\n        // add spotlight for the shadows\n        var spotLight = new THREE.SpotLight(0xffffff);\n        spotLight.position.set(100, 140, 130);\n        spotLight.intensity = 2;\n        scene.add(spotLight);\n\n        // add the output of the renderer to the html element\n        document.getElementById(\"WebGL-output\").appendChild(webGLRenderer.domElement);\n\n        // call the render function\n        var step = 0;\n\n\n        // setup the control gui\n        var controls = new function () {\n            // we need the first child, since it's a multimaterial\n\n\n        };\n\n        var gui = new dat.GUI();\n        var mesh;\n\n        var loader = new THREE.OBJMTLLoader();\n        var load = function (object) {\n            var scale = chroma.scale(['red', 'green', 'blue']);\n            setRandomColors(object, scale);\n            mesh = object;\n            scene.add(mesh);\n        };\n\n\n        var texture = THREE.ImageUtils.loadTexture('https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/textures/Metro01.JPG');\n        //texture.wrapS = texture.wrapT = THREE.MirroredRepeatWrapping;\n        loader.load('https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/models/city.obj', 'https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/models/city.mtl', load);\n        //texture.repeat.set( 1 , 1);\n\n\n        function setCamControls() {\n\n        }\n\n        render();\n\n        function setRandomColors(object, scale) {\n            var children = object.children;\n\n\n            if (children && children.length > 0) {\n                children.forEach(function (e) {\n                    setRandomColors(e, scale)\n                });\n            } else {\n                // no children assume contains a mesh\n                if (object instanceof THREE.Mesh) {\n\n                    object.material.color = new THREE.Color(scale(Math.random()).hex());\n                    if (object.material.name.indexOf(\"building\") == 0) {\n                        object.material.emissive = new THREE.Color(0x444444);\n                        object.material.transparent = true;\n                        object.material.opacity = 0.8;\n                    }\n                }\n            }\n        }\n\n\n        function render() {\n            stats.update();\n            var delta = clock.getDelta();\n\n            if (mesh) {\n                //   mesh.rotation.y+=0.006;\n            }\n\n\n            camControls.update(delta);\n            webGLRenderer.clear();\n            // render using requestAnimationFrame\n            requestAnimationFrame(render);\n            webGLRenderer.render(scene, camera)\n        }\n\n        function initStats() {\n\n            var stats = new Stats();\n            stats.setMode(0); // 0: fps, 1: ms\n\n            // Align top-left\n            stats.domElement.style.position = 'absolute';\n            stats.domElement.style.left = '0px';\n            stats.domElement.style.top = '0px';\n\n            document.getElementById(\"Stats-output\").appendChild(stats.domElement);\n\n            return stats;\n        }\n    }\n    window.onload = init;\n</script>\n</body>\n</html>","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":104,"column":35},"end":{"row":104,"column":36},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":36},"end":{"row":104,"column":37},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":27},"end":{"row":104,"column":28},"action":"remove","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":26},"end":{"row":104,"column":27},"action":"remove","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":25},"end":{"row":104,"column":26},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":24},"end":{"row":104,"column":25},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":23},"end":{"row":104,"column":24},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":22},"end":{"row":104,"column":23},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":22},"end":{"row":104,"column":23},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":23},"end":{"row":104,"column":24},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":24},"end":{"row":104,"column":25},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":25},"end":{"row":104,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":26},"end":{"row":104,"column":27},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":27},"end":{"row":104,"column":28},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":28},"end":{"row":104,"column":29},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":29},"end":{"row":104,"column":30},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":6},"end":{"row":79,"column":0},"action":"insert","lines":["",""]},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":4},"end":{"row":80,"column":0},"action":"insert","lines":["",""]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":4},"end":{"row":81,"column":0},"action":"insert","lines":["",""]},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":4},"end":{"row":82,"column":0},"action":"insert","lines":["",""]},{"start":{"row":82,"column":0},"end":{"row":82,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":4},"end":{"row":131,"column":24},"action":"insert","lines":["// load skybox","","\t\t\t\tvar cubeMap = new THREE.CubeTexture( [] );","\t\t\t\tcubeMap.format = THREE.RGBFormat;","\t\t\t\tcubeMap.flipY = false;","","\t\t\t\tvar loader = new THREE.ImageLoader();","\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","","\t\t\t\t\tvar getSide = function ( x, y ) {","","\t\t\t\t\t\tvar size = 1024;","","\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );","\t\t\t\t\t\tcanvas.width = size;","\t\t\t\t\t\tcanvas.height = size;","","\t\t\t\t\t\tvar context = canvas.getContext( '2d' );","\t\t\t\t\t\tcontext.drawImage( image, - x * size, - y * size );","","\t\t\t\t\t\treturn canvas;","","\t\t\t\t\t};","","\t\t\t\t\tcubeMap.images[ 0 ] = getSide( 2, 1 ); // px","\t\t\t\t\tcubeMap.images[ 1 ] = getSide( 0, 1 ); // nx","\t\t\t\t\tcubeMap.images[ 2 ] = getSide( 1, 0 ); // py","\t\t\t\t\tcubeMap.images[ 3 ] = getSide( 1, 2 ); // ny","\t\t\t\t\tcubeMap.images[ 4 ] = getSide( 1, 1 ); // pz","\t\t\t\t\tcubeMap.images[ 5 ] = getSide( 3, 1 ); // nz","\t\t\t\t\tcubeMap.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\tvar cubeShader = THREE.ShaderLib['cube'];","\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;","","\t\t\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {","\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,","\t\t\t\t\tvertexShader: cubeShader.vertexShader,","\t\t\t\t\tuniforms: cubeShader.uniforms,","\t\t\t\t\tdepthWrite: false,","\t\t\t\t\tside: THREE.BackSide","\t\t\t\t});","","\t\t\t\tvar skyBox = new THREE.Mesh(","\t\t\t\t\tnew THREE.BoxGeometry( 1000000, 1000000, 1000000 ),","\t\t\t\t\tskyBoxMaterial","\t\t\t\t);","\t\t\t\t","\t\t\t\tscene.add( skyBox );"]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":4},"end":{"row":133,"column":0},"action":"insert","lines":["",""]},{"start":{"row":133,"column":0},"end":{"row":133,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":4},"end":{"row":140,"column":6},"action":"insert","lines":["\t\t\t\t// texture","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":7},"end":{"row":133,"column":8},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":6},"end":{"row":133,"column":7},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":5},"end":{"row":133,"column":6},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":4},"end":{"row":133,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":40},"end":{"row":156,"column":41},"action":"remove","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":39},"end":{"row":156,"column":40},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":38},"end":{"row":156,"column":39},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":37},"end":{"row":156,"column":38},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":36},"end":{"row":156,"column":37},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":35},"end":{"row":156,"column":36},"action":"remove","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":34},"end":{"row":156,"column":35},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":33},"end":{"row":156,"column":34},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":32},"end":{"row":156,"column":33},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":31},"end":{"row":156,"column":32},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":30},"end":{"row":156,"column":31},"action":"remove","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":29},"end":{"row":156,"column":30},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":28},"end":{"row":156,"column":29},"action":"remove","lines":["V"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":27},"end":{"row":156,"column":28},"action":"remove","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":27},"end":{"row":156,"column":28},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":28},"end":{"row":156,"column":29},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":29},"end":{"row":156,"column":30},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":30},"end":{"row":156,"column":31},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":31},"end":{"row":156,"column":32},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":32},"end":{"row":156,"column":33},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":33},"end":{"row":156,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":34},"end":{"row":156,"column":35},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":35},"end":{"row":156,"column":36},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":36},"end":{"row":156,"column":37},"action":"insert","lines":["2"]},{"start":{"row":156,"column":37},"end":{"row":156,"column":38},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":38},"end":{"row":156,"column":39},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":39},"end":{"row":156,"column":40},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":40},"end":{"row":156,"column":41},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":41},"end":{"row":156,"column":42},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":42},"end":{"row":156,"column":43},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":43},"end":{"row":156,"column":44},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":44},"end":{"row":156,"column":45},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":45},"end":{"row":156,"column":46},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":46},"end":{"row":156,"column":47},"action":"insert","lines":["p"]},{"start":{"row":156,"column":47},"end":{"row":156,"column":48},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":48},"end":{"row":156,"column":49},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":67},"end":{"row":167,"column":0},"action":"insert","lines":["",""]},{"start":{"row":167,"column":0},"end":{"row":167,"column":5},"action":"insert","lines":["\t\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":5},"end":{"row":168,"column":0},"action":"insert","lines":["loader.load( 'obj/transdec/transdec.obj', function ( object ) {",""]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":4},"end":{"row":167,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":4},"end":{"row":166,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":5},"end":{"row":166,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":22},"end":{"row":167,"column":30},"action":"remove","lines":["transdec"]},{"start":{"row":167,"column":22},"end":{"row":167,"column":23},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":23},"end":{"row":167,"column":24},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":25},"end":{"row":167,"column":26},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":26},"end":{"row":167,"column":27},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":28},"end":{"row":167,"column":36},"action":"remove","lines":["transdec"]},{"start":{"row":167,"column":28},"end":{"row":167,"column":29},"action":"insert","lines":["m"]},{"start":{"row":167,"column":29},"end":{"row":167,"column":30},"action":"insert","lines":["a"]},{"start":{"row":167,"column":30},"end":{"row":167,"column":31},"action":"insert","lines":["l"]},{"start":{"row":167,"column":31},"end":{"row":167,"column":32},"action":"insert","lines":["e"]},{"start":{"row":167,"column":32},"end":{"row":167,"column":33},"action":"insert","lines":["0"]},{"start":{"row":167,"column":33},"end":{"row":167,"column":34},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":31},"end":{"row":167,"column":32},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":31},"end":{"row":167,"column":32},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":25},"end":{"row":167,"column":26},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":72},"end":{"row":157,"column":0},"action":"insert","lines":["",""]},{"start":{"row":157,"column":0},"end":{"row":157,"column":5},"action":"insert","lines":["\t\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":5},"end":{"row":158,"column":0},"action":"insert","lines":["\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {",""]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":8},"end":{"row":157,"column":9},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":7},"end":{"row":157,"column":8},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":6},"end":{"row":157,"column":7},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":5},"end":{"row":157,"column":6},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":4},"end":{"row":157,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":4},"end":{"row":156,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":5},"end":{"row":156,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":27},"end":{"row":157,"column":49},"action":"remove","lines":["skyboxsun25degtest.png"]},{"start":{"row":157,"column":27},"end":{"row":157,"column":28},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":28},"end":{"row":157,"column":29},"action":"insert","lines":["V"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":29},"end":{"row":157,"column":30},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":30},"end":{"row":157,"column":31},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":31},"end":{"row":157,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":32},"end":{"row":157,"column":33},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":33},"end":{"row":157,"column":34},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":34},"end":{"row":157,"column":35},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":35},"end":{"row":157,"column":36},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":36},"end":{"row":157,"column":37},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":244,"column":7},"action":"remove","lines":["","<!DOCTYPE html>","<html lang=\"en\">","\t<head>","\t\t<title>three.js webgl - loaders - OBJ loader</title>","\t\t<meta charset=\"utf-8\">","\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">","\t\t<style>","\t\t\tbody {","\t\t\t\tfont-family: Monospace;","\t\t\t\tbackground-color: #000;","\t\t\t\tcolor: #fff;","\t\t\t\tmargin: 0px;","\t\t\t\toverflow: hidden;","\t\t\t}","\t\t\t#info {","\t\t\t\tcolor: #fff;","\t\t\t\tposition: absolute;","\t\t\t\ttop: 10px;","\t\t\t\twidth: 100%;","\t\t\t\ttext-align: center;","\t\t\t\tz-index: 100;","\t\t\t\tdisplay:block;","\t\t\t}","\t\t\t#info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }","\t\t</style>","\t</head>","","\t<body>","\t\t<div id=\"info\">","\t\t<a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - OBJLoader test","\t\t</div>","","\t\t<script src=\"js/three.min.js\"></script>","\t\t<script src=\"js/loaders/OBJLoader.js\"></script>","","\t\t<script>","","\t\t\tvar container;","","\t\t\tvar camera, scene, renderer;","","\t\t\tvar mouseX = 0, mouseY = 0;","","\t\t\tvar windowHalfX = window.innerWidth / 2;","\t\t\tvar windowHalfY = window.innerHeight / 2;","","","\t\t\tinit();","\t\t\tanimate();","","","\t\t\tfunction init() {","","\t\t\t\tcontainer = document.createElement( 'div' );","\t\t\t\tdocument.body.appendChild( container );","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );","\t\t\t\tcamera.position.z = 100;","","\t\t\t\t// scene","","\t\t\t\tscene = new THREE.Scene();","","\t\t\t\tvar ambient = new THREE.AmbientLight( 0x101030 );","\t\t\t\tscene.add( ambient );","","\t\t\t\tvar directionalLight = new THREE.DirectionalLight( 0xffeedd );","\t\t\t\tdirectionalLight.position.set( 0, 0, 1 );","\t\t\t\tscene.add( directionalLight );","","\t\t\t\t// texture","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","\t\t\t\t","\t\t\t\t","\t\t\t\t// load skybox","","\t\t\t\tvar cubeMap = new THREE.CubeTexture( [] );","\t\t\t\tcubeMap.format = THREE.RGBFormat;","\t\t\t\tcubeMap.flipY = false;","","\t\t\t\tvar loader = new THREE.ImageLoader();","\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","","\t\t\t\t\tvar getSide = function ( x, y ) {","","\t\t\t\t\t\tvar size = 1024;","","\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );","\t\t\t\t\t\tcanvas.width = size;","\t\t\t\t\t\tcanvas.height = size;","","\t\t\t\t\t\tvar context = canvas.getContext( '2d' );","\t\t\t\t\t\tcontext.drawImage( image, - x * size, - y * size );","","\t\t\t\t\t\treturn canvas;","","\t\t\t\t\t};","","\t\t\t\t\tcubeMap.images[ 0 ] = getSide( 2, 1 ); // px","\t\t\t\t\tcubeMap.images[ 1 ] = getSide( 0, 1 ); // nx","\t\t\t\t\tcubeMap.images[ 2 ] = getSide( 1, 0 ); // py","\t\t\t\t\tcubeMap.images[ 3 ] = getSide( 1, 2 ); // ny","\t\t\t\t\tcubeMap.images[ 4 ] = getSide( 1, 1 ); // pz","\t\t\t\t\tcubeMap.images[ 5 ] = getSide( 3, 1 ); // nz","\t\t\t\t\tcubeMap.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\tvar cubeShader = THREE.ShaderLib['cube'];","\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;","","\t\t\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {","\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,","\t\t\t\t\tvertexShader: cubeShader.vertexShader,","\t\t\t\t\tuniforms: cubeShader.uniforms,","\t\t\t\t\tdepthWrite: false,","\t\t\t\t\tside: THREE.BackSide","\t\t\t\t});","","\t\t\t\tvar skyBox = new THREE.Mesh(","\t\t\t\t\tnew THREE.BoxGeometry( 1000000, 1000000, 1000000 ),","\t\t\t\t\tskyBoxMaterial","\t\t\t\t);","\t\t\t\t","\t\t\t\tscene.add( skyBox );","\t\t\t\t","\t\t\t\t// texture","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","","\t\t\t\tvar texture = new THREE.Texture();","","\t\t\t\tvar onProgress = function ( xhr ) {","\t\t\t\t\tif ( xhr.lengthComputable ) {","\t\t\t\t\t\tvar percentComplete = xhr.loaded / xhr.total * 100;","\t\t\t\t\t\tconsole.log( Math.round(percentComplete, 2) + '% downloaded' );","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\tvar onError = function ( xhr ) {","\t\t\t\t};","","","\t\t\t\tvar loader = new THREE.ImageLoader( manager );","\t\t\t\t//loader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","\t\t\t\tloader.load( 'textures/UV_Grid_Sm', function ( image ) {","","","\t\t\t\t\ttexture.image = image;","\t\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\t// model","","\t\t\t\tvar loader = new THREE.OBJLoader( manager );","\t\t\t\t//loader.load( 'obj/transdec/transdec.obj', function ( object ) {","\t\t\t\tloader.load( 'obj/male02/male02.obj', function ( object ) {","","","\t\t\t\t\tobject.traverse( function ( child ) {","","\t\t\t\t\t\tif ( child instanceof THREE.Mesh ) {","","\t\t\t\t\t\t\tchild.material.map = texture;","","\t\t\t\t\t\t}","","\t\t\t\t\t} );","","\t\t\t\t\tobject.position.y = - 80;","\t\t\t\t\tscene.add( object );","","\t\t\t\t}, onProgress, onError );","","\t\t\t\t//","","\t\t\t\trenderer = new THREE.WebGLRenderer();","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );","","\t\t\t\t//","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\twindowHalfX = window.innerWidth / 2;","\t\t\t\twindowHalfY = window.innerHeight / 2;","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t}","","\t\t\tfunction onDocumentMouseMove( event ) {","","\t\t\t\tmouseX = ( event.clientX - windowHalfX ) / 2;","\t\t\t\tmouseY = ( event.clientY - windowHalfY ) / 2;","","\t\t\t}","","\t\t\t//","","\t\t\tfunction animate() {","","\t\t\t\trequestAnimationFrame( animate );","\t\t\t\trender();","","\t\t\t}","","\t\t\tfunction render() {","","\t\t\t\tcamera.position.x += ( mouseX - camera.position.x ) * .05;","\t\t\t\tcamera.position.y += ( - mouseY - camera.position.y ) * .05;","","\t\t\t\tcamera.lookAt( scene.position );","","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}","","\t\t</script>","","\t</body>","</html>"]},{"start":{"row":0,"column":0},"end":{"row":214,"column":0},"action":"insert","lines":["","<!DOCTYPE html>","<html lang=\"en\">","\t<head>","\t\t<title>three.js webgl - loaders - OBJ loader</title>","\t\t<meta charset=\"utf-8\">","\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">","\t\t<style>","\t\t","\t\tbody {","\t\t\t\tcolor: #61443e;","\t\t\t\tfont-family:Monospace;","\t\t\t\tfont-size:13px;","\t\t\t\ttext-align:center;","","\t\t\t\tbackground-color: #efd1b5;","\t\t\t\tmargin: 0px;","\t\t\t\toverflow: hidden;","\t\t\t}","","\t\t\t#info {","\t\t\t\tposition: absolute;","\t\t\t\ttop: 0px; width: 100%;","\t\t\t\tpadding: 5px;","\t\t\t}","","\t\t\ta {","","\t\t\t\tcolor: #a06851;","\t\t\t}","\t\t","\t\t</style>","\t</head>","","\t<body>","\t\t<div id=\"info\">","\t\t<a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - OBJLoader test","\t\t</div>","","\t\t<script src=\"js/three.min.js\"></script>","\t\t<script src=\"js/loaders/OBJLoader.js\"></script>","\t\t<script src=\"js/controls/FirstPersonControls.js\"></script>","","\t\t<script src=\"js/ImprovedNoise.js\"></script>","","\t\t<script src=\"js/Detector.js\"></script>","\t\t<script src=\"js/libs/stats.min.js\"></script>","","\t\t<script>","","\t\t\t","","\t\t\t","","","\t\t\tvar container, stats;","","\t\t\tvar camera, controls, scene, renderer;","","\t\t\tvar mesh, texture;","","\t\t\tvar worldWidth = 256, worldDepth = 256,","\t\t\tworldHalfWidth = worldWidth / 2, worldHalfDepth = worldDepth / 2;","","\t\t\tvar clock = new THREE.Clock();","","\t\t\tinit();","\t\t\tanimate();","","","\t\t\tfunction init() {","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );","","\t\t\t\tcontrols = new THREE.FirstPersonControls( camera );","\t\t\t\tcontrols.movementSpeed = 150;","\t\t\t\tcontrols.lookSpeed = 0.1;","","\t\t\t\tscene = new THREE.Scene();","\t\t\t\tscene.fog = new THREE.FogExp2( 0xefd1b5, 0.0025 );","","\t\t\t\tdata = generateHeight( worldWidth, worldDepth );","","\t\t\t\tcamera.position.y = data[ worldHalfWidth + worldHalfDepth * worldWidth ] * 10 + 500;","","\t\t\t\tvar geometry = new THREE.PlaneBufferGeometry( 7500, 7500, worldWidth - 1, worldDepth - 1 );","\t\t\t\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );","","\t\t\t\tvar vertices = geometry.attributes.position.array;","","\t\t\t\tfor ( var i = 0, j = 0, l = vertices.length; i < l; i ++, j += 3 ) {","","\t\t\t\t\tvertices[ j + 1 ] = data[ i ] * 10;","","\t\t\t\t}","","\t\t\t\ttexture = new THREE.Texture( generateTexture( data, worldWidth, worldDepth ), THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping );","\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\tmesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );","\t\t\t\tscene.add( mesh );","","\t\t\t\trenderer = new THREE.WebGLRenderer();","\t\t\t\trenderer.setClearColor( 0xefd1b5 );","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\tcontainer.innerHTML = \"\";","","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\tstats = new Stats();","\t\t\t\tstats.domElement.style.position = 'absolute';","\t\t\t\tstats.domElement.style.top = '0px';","\t\t\t\tcontainer.appendChild( stats.domElement );","","","\t\t\t\t//","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","","\t\t\t\tvar texture = new THREE.Texture();","","\t\t\t\tvar onProgress = function ( xhr ) {","\t\t\t\t\tif ( xhr.lengthComputable ) {","\t\t\t\t\t\tvar percentComplete = xhr.loaded / xhr.total * 100;","\t\t\t\t\t\tconsole.log( Math.round(percentComplete, 2) + '% downloaded' );","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\tvar onError = function ( xhr ) {","\t\t\t\t};","","","\t\t\t\tvar loader = new THREE.ImageLoader( manager );","\t\t\t\tloader.load( 'textures/UV_Grid_Sm.jpg', function ( image ) {","","\t\t\t\t\ttexture.image = image;","\t\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\t// model","","\t\t\t\tvar loader = new THREE.OBJLoader( manager );","\t\t\t\tloader.load( 'obj/transdec/transdec.obj', function ( object ) {","","\t\t\t\t\tobject.traverse( function ( child ) {","","\t\t\t\t\t\tif ( child instanceof THREE.Mesh ) {","","\t\t\t\t\t\t\tchild.material.map = texture;","","\t\t\t\t\t\t}","","\t\t\t\t\t} );","","\t\t\t\t\tobject.position.y = - 80;","\t\t\t\t\tobject.scale.set(.025,.025,.025)","\t\t\t\t\tscene.add( object );","","\t\t\t\t}, onProgress, onError );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\tcontrols.handleResize();","","\t\t\t}","\t\t\t//","","\t\t\tfunction animate() {","","\t\t\t\trequestAnimationFrame( animate );","","\t\t\t\trender();","\t\t\t\tstats.update();","","\t\t\t}","","\t\t\tfunction render() {","","                        \tcontrols.update( clock.getDelta() );","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}","","\t\t</script>","","\t</body>","</html>",""]}]}],[{"group":"doc","deltas":[{"start":{"row":152,"column":27},"end":{"row":152,"column":40},"action":"remove","lines":["UV_Grid_Sm.jp"]},{"start":{"row":152,"column":27},"end":{"row":152,"column":48},"action":"insert","lines":["skyboxsun25degtest.pn"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":214,"column":0},"action":"remove","lines":["","<!DOCTYPE html>","<html lang=\"en\">","\t<head>","\t\t<title>three.js webgl - loaders - OBJ loader</title>","\t\t<meta charset=\"utf-8\">","\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">","\t\t<style>","\t\t","\t\tbody {","\t\t\t\tcolor: #61443e;","\t\t\t\tfont-family:Monospace;","\t\t\t\tfont-size:13px;","\t\t\t\ttext-align:center;","","\t\t\t\tbackground-color: #efd1b5;","\t\t\t\tmargin: 0px;","\t\t\t\toverflow: hidden;","\t\t\t}","","\t\t\t#info {","\t\t\t\tposition: absolute;","\t\t\t\ttop: 0px; width: 100%;","\t\t\t\tpadding: 5px;","\t\t\t}","","\t\t\ta {","","\t\t\t\tcolor: #a06851;","\t\t\t}","\t\t","\t\t</style>","\t</head>","","\t<body>","\t\t<div id=\"info\">","\t\t<a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - OBJLoader test","\t\t</div>","","\t\t<script src=\"js/three.min.js\"></script>","\t\t<script src=\"js/loaders/OBJLoader.js\"></script>","\t\t<script src=\"js/controls/FirstPersonControls.js\"></script>","","\t\t<script src=\"js/ImprovedNoise.js\"></script>","","\t\t<script src=\"js/Detector.js\"></script>","\t\t<script src=\"js/libs/stats.min.js\"></script>","","\t\t<script>","","\t\t\t","","\t\t\t","","","\t\t\tvar container, stats;","","\t\t\tvar camera, controls, scene, renderer;","","\t\t\tvar mesh, texture;","","\t\t\tvar worldWidth = 256, worldDepth = 256,","\t\t\tworldHalfWidth = worldWidth / 2, worldHalfDepth = worldDepth / 2;","","\t\t\tvar clock = new THREE.Clock();","","\t\t\tinit();","\t\t\tanimate();","","","\t\t\tfunction init() {","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );","","\t\t\t\tcontrols = new THREE.FirstPersonControls( camera );","\t\t\t\tcontrols.movementSpeed = 150;","\t\t\t\tcontrols.lookSpeed = 0.1;","","\t\t\t\tscene = new THREE.Scene();","\t\t\t\tscene.fog = new THREE.FogExp2( 0xefd1b5, 0.0025 );","","\t\t\t\tdata = generateHeight( worldWidth, worldDepth );","","\t\t\t\tcamera.position.y = data[ worldHalfWidth + worldHalfDepth * worldWidth ] * 10 + 500;","","\t\t\t\tvar geometry = new THREE.PlaneBufferGeometry( 7500, 7500, worldWidth - 1, worldDepth - 1 );","\t\t\t\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );","","\t\t\t\tvar vertices = geometry.attributes.position.array;","","\t\t\t\tfor ( var i = 0, j = 0, l = vertices.length; i < l; i ++, j += 3 ) {","","\t\t\t\t\tvertices[ j + 1 ] = data[ i ] * 10;","","\t\t\t\t}","","\t\t\t\ttexture = new THREE.Texture( generateTexture( data, worldWidth, worldDepth ), THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping );","\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\tmesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );","\t\t\t\tscene.add( mesh );","","\t\t\t\trenderer = new THREE.WebGLRenderer();","\t\t\t\trenderer.setClearColor( 0xefd1b5 );","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\tcontainer.innerHTML = \"\";","","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\tstats = new Stats();","\t\t\t\tstats.domElement.style.position = 'absolute';","\t\t\t\tstats.domElement.style.top = '0px';","\t\t\t\tcontainer.appendChild( stats.domElement );","","","\t\t\t\t//","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","","\t\t\t\tvar texture = new THREE.Texture();","","\t\t\t\tvar onProgress = function ( xhr ) {","\t\t\t\t\tif ( xhr.lengthComputable ) {","\t\t\t\t\t\tvar percentComplete = xhr.loaded / xhr.total * 100;","\t\t\t\t\t\tconsole.log( Math.round(percentComplete, 2) + '% downloaded' );","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\tvar onError = function ( xhr ) {","\t\t\t\t};","","","\t\t\t\tvar loader = new THREE.ImageLoader( manager );","\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","","\t\t\t\t\ttexture.image = image;","\t\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\t// model","","\t\t\t\tvar loader = new THREE.OBJLoader( manager );","\t\t\t\tloader.load( 'obj/transdec/transdec.obj', function ( object ) {","","\t\t\t\t\tobject.traverse( function ( child ) {","","\t\t\t\t\t\tif ( child instanceof THREE.Mesh ) {","","\t\t\t\t\t\t\tchild.material.map = texture;","","\t\t\t\t\t\t}","","\t\t\t\t\t} );","","\t\t\t\t\tobject.position.y = - 80;","\t\t\t\t\tobject.scale.set(.025,.025,.025)","\t\t\t\t\tscene.add( object );","","\t\t\t\t}, onProgress, onError );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\tcontrols.handleResize();","","\t\t\t}","\t\t\t//","","\t\t\tfunction animate() {","","\t\t\t\trequestAnimationFrame( animate );","","\t\t\t\trender();","\t\t\t\tstats.update();","","\t\t\t}","","\t\t\tfunction render() {","","                        \tcontrols.update( clock.getDelta() );","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}","","\t\t</script>","","\t</body>","</html>",""]},{"start":{"row":0,"column":0},"end":{"row":180,"column":7},"action":"insert","lines":["<!DOCTYPE html>","","<html>","","<head>","    <title>Example 09.07 - first person camera </title>\t\t","    <script src=\"js/three.min.js\"></script>","    <script src=\"js/loaders/OBJLoader.js\"></script>","    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/MTLLoader.js\"></script>","    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/OBJMTLLoader.js\"></script>","    <script src=\"js/controls/FirstPersonControls.js\"></script>","","","    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/stats.js\"></script>","    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/dat.gui.js\"></script>","    <script type=\"text/javascript\" src=\"https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/chroma.js\"></script>","","    <style>","        body {","            /* set margin to 0 and overflow to hidden, to go fullscreen */","            margin: 0;","            overflow: hidden;","        }","    </style>","</head>","<body>","","<div id=\"Stats-output\">","</div>","<!-- Div which will hold the Output -->","<div id=\"WebGL-output\">","</div>","","<!-- Javascript code that runs our Three.js examples -->","<script type=\"text/javascript\">","","    // once everything is loaded, we run our Three.js stuff.","    function init() {","","","        var clock = new THREE.Clock();","","        var stats = initStats();","","        // create a scene, that will hold all our elements such as objects, cameras and lights.","        var scene = new THREE.Scene();","","        // create a camera, which defines where we're looking at.","        var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);","","","        // create a render and set the size","        var webGLRenderer = new THREE.WebGLRenderer();","        webGLRenderer.setClearColor(new THREE.Color(0x000, 1.0));","        webGLRenderer.setSize(window.innerWidth, window.innerHeight);","        webGLRenderer.shadowMapEnabled = true;","","        // position and point the camera to the center of the scene","        camera.position.x = 100;","        camera.position.y = 10;","        camera.position.z = 10;","        camera.lookAt(new THREE.Vector3(0, 0, 0));","","","        var camControls = new THREE.FirstPersonControls(camera);","        camControls.lookSpeed = 0.4;","        camControls.movementSpeed = 20;","        camControls.noFly = true;","        camControls.lookVertical = true;","        camControls.constrainVertical = true;","        camControls.verticalMin = 1.0;","        camControls.verticalMax = 2.0;","        camControls.lon = -150;","        camControls.lat = 120;","","","        var ambientLight = new THREE.AmbientLight(0x383838);","        scene.add(ambientLight);","","        // add spotlight for the shadows","        var spotLight = new THREE.SpotLight(0xffffff);","        spotLight.position.set(100, 140, 130);","        spotLight.intensity = 2;","        scene.add(spotLight);","","        // add the output of the renderer to the html element","        document.getElementById(\"WebGL-output\").appendChild(webGLRenderer.domElement);","","        // call the render function","        var step = 0;","","","        // setup the control gui","        var controls = new function () {","            // we need the first child, since it's a multimaterial","","","        };","","        var gui = new dat.GUI();","        var mesh;","","        var loader = new THREE.OBJMTLLoader();","        var load = function (object) {","            var scale = chroma.scale(['red', 'green', 'blue']);","            setRandomColors(object, scale);","            mesh = object;","            scene.add(mesh);","        };","","","        var texture = THREE.ImageUtils.loadTexture('https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/textures/Metro01.JPG');","        //texture.wrapS = texture.wrapT = THREE.MirroredRepeatWrapping;","        loader.load('https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/models/city.obj', 'https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/models/city.mtl', load);","        //texture.repeat.set( 1 , 1);","","","        function setCamControls() {","","        }","","        render();","","        function setRandomColors(object, scale) {","            var children = object.children;","","","            if (children && children.length > 0) {","                children.forEach(function (e) {","                    setRandomColors(e, scale)","                });","            } else {","                // no children assume contains a mesh","                if (object instanceof THREE.Mesh) {","","                    object.material.color = new THREE.Color(scale(Math.random()).hex());","                    if (object.material.name.indexOf(\"building\") == 0) {","                        object.material.emissive = new THREE.Color(0x444444);","                        object.material.transparent = true;","                        object.material.opacity = 0.8;","                    }","                }","            }","        }","","","        function render() {","            stats.update();","            var delta = clock.getDelta();","","            if (mesh) {","                //   mesh.rotation.y+=0.006;","            }","","","            camControls.update(delta);","            webGLRenderer.clear();","            // render using requestAnimationFrame","            requestAnimationFrame(render);","            webGLRenderer.render(scene, camera)","        }","","        function initStats() {","","            var stats = new Stats();","            stats.setMode(0); // 0: fps, 1: ms","","            // Align top-left","            stats.domElement.style.position = 'absolute';","            stats.domElement.style.left = '0px';","            stats.domElement.style.top = '0px';","","            document.getElementById(\"Stats-output\").appendChild(stats.domElement);","","            return stats;","        }","    }","    window.onload = init;","</script>","</body>","</html>"]}]}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":180,"column":7},"end":{"row":180,"column":7},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1425897142000}