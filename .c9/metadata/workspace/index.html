{"changed":true,"filter":false,"title":"index.html","tooltip":"/index.html","value":"<!DOCTYPE html>\n\n<html>\n\n<head>\n    <title>Example 09.07 - first person camera </title>\t\t\n    <script type=\"text/javascript\" src=\"js/josdirksen/three.js\"></script>\n    <script type=\"text/javascript\" src=\"js/josdirksen/OBJLoader.js\"></script>\n    <script type=\"text/javascript\" src=\"js/josdirksen/MTLLoader.js\"></script>\n    <script type=\"text/javascript\" src=\"js/josdirksen/OBJMTLLoader.js\"></script>\n    <script type=\"text/javascript\" src=\"js/josdirksen/FirstPersonControls.js\"></script>\n\n\n    <script type=\"text/javascript\" src=\"js/josdirksen/stats.js\"></script>\n    <script type=\"text/javascript\" src=\"js/josdirksen/dat.gui.js\"></script>\n    <script type=\"text/javascript\" src=\"js/josdirksen/chroma.js\"></script>\n\n    <style>\n        body {\n            /* set margin to 0 and overflow to hidden, to go fullscreen */\n            margin: 0;\n            overflow: hidden;\n        }\n    </style>\n</head>\n<body>\n\n<div id=\"Stats-output\">\n</div>\n<!-- Div which will hold the Output -->\n<div id=\"WebGL-output\">\n</div>\n\n<!-- Javascript code that runs our Three.js examples -->\n<script type=\"text/javascript\">\n\n    // once everything is loaded, we run our Three.js stuff.\n    function init() {\n\n\n        var clock = new THREE.Clock();\n\n        var stats = initStats();\n\n        // create a scene, that will hold all our elements such as objects, cameras and lights.\n        var scene = new THREE.Scene();\n\n        // create a camera, which defines where we're looking at.\n        var camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);\n\n\n        // create a render and set the size\n        var webGLRenderer = new THREE.WebGLRenderer();\n        webGLRenderer.setClearColor(new THREE.Color(0x000, 1.0));\n        webGLRenderer.setSize(window.innerWidth, window.innerHeight);\n        webGLRenderer.shadowMapEnabled = true;\n\n        // position and point the camera to the center of the scene\n        camera.position.x = 100;\n        camera.position.y = 10;\n        camera.position.z = 10;\n        camera.lookAt(new THREE.Vector3(0, 0, 0));\n\n\n        var camControls = new THREE.FirstPersonControls(camera);\n        camControls.lookSpeed = 0.4;\n        camControls.movementSpeed = 20;\n        camControls.noFly = true;\n        camControls.lookVertical = true;\n        camControls.constrainVertical = true;\n        camControls.verticalMin = 1.0;\n        camControls.verticalMax = 2.0;\n        camControls.lon = -150;\n        camControls.lat = 120;\n\n\n        var ambientLight = new THREE.AmbientLight(0x383838);\n        scene.add(ambientLight);\n\n        // add spotlight for the shadows\n        var spotLight = new THREE.SpotLight(0xffffff);\n        spotLight.position.set(100, 140, 130);\n        spotLight.intensity = 2;\n        scene.add(spotLight);\n\n        // add the output of the renderer to the html element\n        document.getElementById(\"WebGL-output\").appendChild(webGLRenderer.domElement);\n\n        // call the render function\n        var step = 0;\n\n\n        // setup the control gui\n        var controls = new function () {\n            // we need the first child, since it's a multimaterial\n\n\n        };\n\n        var gui = new dat.GUI();\n        var mesh;\n\n        var loader = new THREE.OBJMTLLoader();\n        var load = function (object) {\n            var scale = chroma.scale(['red', 'green', 'blue']);\n            setRandomColors(object, scale);\n            mesh = object;\n            scene.add(mesh);\n        };\n\n\n        var texture = THREE.ImageUtils.loadTexture('js/josdirksen/metro01.JPG');\n        //texture.wrapS = texture.wrapT = THREE.MirroredRepeatWrapping;\n        loader.load('js/josdirksen/city.obj', 'js/josdirksen/city.mtl', load);\n        //texture.repeat.set( 1 , 1);\n\n\n        function setCamControls() {\n\n        }\n\n        render();\n\n        function setRandomColors(object, scale) {\n            var children = object.children;\n\n\n            if (children && children.length > 0) {\n                children.forEach(function (e) {\n                    setRandomColors(e, scale)\n                });\n            } else {\n                // no children assume contains a mesh\n                if (object instanceof THREE.Mesh) {\n\n                    object.material.color = new THREE.Color(scale(Math.random()).hex());\n                    if (object.material.name.indexOf(\"building\") == 0) {\n                        object.material.emissive = new THREE.Color(0x444444);\n                        object.material.transparent = true;\n                        object.material.opacity = 0.8;\n                    }\n                }\n            }\n        }\n\n\n        function render() {\n            stats.update();\n            var delta = clock.getDelta();\n\n            if (mesh) {\n                //   mesh.rotation.y+=0.006;\n            }\n\n\n            camControls.update(delta);\n            webGLRenderer.clear();\n            // render using requestAnimationFrame\n            requestAnimationFrame(render);\n            webGLRenderer.render(scene, camera)\n        }\n\n        function initStats() {\n\n            var stats = new Stats();\n            stats.setMode(0); // 0: fps, 1: ms\n\n            // Align top-left\n            stats.domElement.style.position = 'absolute';\n            stats.domElement.style.left = '0px';\n            stats.domElement.style.top = '0px';\n\n            document.getElementById(\"Stats-output\").appendChild(stats.domElement);\n\n            return stats;\n        }\n    }\n    window.onload = init;\n</script>\n</body>\n</html>\n","undoManager":{"mark":-40,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":9,"column":55},"end":{"row":9,"column":56},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":54},"end":{"row":9,"column":55},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":53},"end":{"row":9,"column":54},"action":"remove","lines":["v"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":52},"end":{"row":9,"column":53},"action":"remove","lines":["a"]},{"start":{"row":9,"column":51},"end":{"row":9,"column":52},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":50},"end":{"row":9,"column":51},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":49},"end":{"row":9,"column":50},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":48},"end":{"row":9,"column":49},"action":"remove","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":47},"end":{"row":9,"column":48},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":46},"end":{"row":9,"column":47},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":45},"end":{"row":9,"column":46},"action":"remove","lines":["\""]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":44},"end":{"row":9,"column":45},"action":"remove","lines":["="]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":43},"end":{"row":9,"column":44},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":42},"end":{"row":9,"column":43},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":41},"end":{"row":9,"column":42},"action":"remove","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":40},"end":{"row":9,"column":41},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":40},"end":{"row":9,"column":41},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":41},"end":{"row":9,"column":42},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":42},"end":{"row":9,"column":43},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":43},"end":{"row":9,"column":44},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":44},"end":{"row":9,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":45},"end":{"row":9,"column":46},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":46},"end":{"row":9,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":47},"end":{"row":9,"column":48},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":48},"end":{"row":9,"column":49},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":49},"end":{"row":9,"column":50},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":50},"end":{"row":9,"column":51},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":51},"end":{"row":9,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":52},"end":{"row":9,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":9,"column":53},"end":{"row":9,"column":54},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":51},"end":{"row":10,"column":52},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":50},"end":{"row":10,"column":51},"action":"remove","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":49},"end":{"row":10,"column":50},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":48},"end":{"row":10,"column":49},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":47},"end":{"row":10,"column":48},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":46},"end":{"row":10,"column":47},"action":"remove","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":45},"end":{"row":10,"column":46},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":44},"end":{"row":10,"column":45},"action":"remove","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":43},"end":{"row":10,"column":44},"action":"remove","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":43},"end":{"row":10,"column":44},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":44},"end":{"row":10,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":45},"end":{"row":10,"column":46},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":46},"end":{"row":10,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":47},"end":{"row":10,"column":48},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":48},"end":{"row":10,"column":49},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":49},"end":{"row":10,"column":50},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":50},"end":{"row":10,"column":51},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":51},"end":{"row":10,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":52},"end":{"row":10,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":10,"column":53},"end":{"row":10,"column":54},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":40},"end":{"row":13,"column":119},"action":"remove","lines":["https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":40},"end":{"row":13,"column":41},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":41},"end":{"row":13,"column":42},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":42},"end":{"row":13,"column":43},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":43},"end":{"row":13,"column":44},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":44},"end":{"row":13,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":45},"end":{"row":13,"column":46},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":46},"end":{"row":13,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":47},"end":{"row":13,"column":48},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":48},"end":{"row":13,"column":49},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":49},"end":{"row":13,"column":50},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":50},"end":{"row":13,"column":51},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":51},"end":{"row":13,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":52},"end":{"row":13,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":13,"column":53},"end":{"row":13,"column":54},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":40},"end":{"row":14,"column":119},"action":"remove","lines":["https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/"]},{"start":{"row":14,"column":40},"end":{"row":14,"column":41},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":41},"end":{"row":14,"column":42},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":42},"end":{"row":14,"column":43},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":43},"end":{"row":14,"column":44},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":44},"end":{"row":14,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":45},"end":{"row":14,"column":46},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":46},"end":{"row":14,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":47},"end":{"row":14,"column":48},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":48},"end":{"row":14,"column":49},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":49},"end":{"row":14,"column":50},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":50},"end":{"row":14,"column":51},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":51},"end":{"row":14,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":52},"end":{"row":14,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":52},"end":{"row":14,"column":53},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":52},"end":{"row":14,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":14,"column":54},"end":{"row":14,"column":55},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":40},"end":{"row":15,"column":119},"action":"remove","lines":["https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/libs/"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":40},"end":{"row":15,"column":41},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":41},"end":{"row":15,"column":42},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":42},"end":{"row":15,"column":43},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":43},"end":{"row":15,"column":44},"action":"insert","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":44},"end":{"row":15,"column":45},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":45},"end":{"row":15,"column":46},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":46},"end":{"row":15,"column":47},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":47},"end":{"row":15,"column":48},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":48},"end":{"row":15,"column":49},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":49},"end":{"row":15,"column":50},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":50},"end":{"row":15,"column":51},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":51},"end":{"row":15,"column":52},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":52},"end":{"row":15,"column":53},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":15,"column":53},"end":{"row":15,"column":54},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":52},"end":{"row":111,"column":142},"action":"remove","lines":["https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/textures/"]},{"start":{"row":111,"column":52},"end":{"row":111,"column":66},"action":"insert","lines":["js/josdirksen/"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":21},"end":{"row":113,"column":108},"action":"remove","lines":["https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/models"]},{"start":{"row":113,"column":21},"end":{"row":113,"column":35},"action":"insert","lines":["js/josdirksen/"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":34},"end":{"row":113,"column":35},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":113,"column":47},"end":{"row":113,"column":135},"action":"remove","lines":["https://raw.githubusercontent.com/josdirksen/learning-threejs/blob/master/assets/models/"]},{"start":{"row":113,"column":47},"end":{"row":113,"column":61},"action":"insert","lines":["js/josdirksen/"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":66},"end":{"row":111,"column":67},"action":"remove","lines":["M"]}]}],[{"group":"doc","deltas":[{"start":{"row":111,"column":66},"end":{"row":111,"column":67},"action":"insert","lines":["m"]}]}]]},"ace":{"folds":[],"scrolltop":1228,"scrollleft":0,"selection":{"start":{"row":111,"column":69},"end":{"row":111,"column":69},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":86,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1425897142000}