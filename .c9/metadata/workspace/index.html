{"changed":true,"filter":false,"title":"index.html","tooltip":"/index.html","value":"\n<!DOCTYPE html>\n<html lang=\"en\">\n\t<head>\n\t\t<title>SimBox - Robosub Simulator</title>\n\t\t<meta charset=\"utf-8\">\n\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">\n\t\t<style>\n\t\t\tbody {\n\t\t\t\tcolor: #000;\n\t\t\t\tfont-family:Monospace;\n\t\t\t\tfont-size:13px;\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\t\t\t#info {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0px; width: 100%;\n\t\t\t\ttext-align:center;\n\t\t\t\tpadding: 5px;\n\t\t\t}\n\t\t\t#inset  {\n\t\t\t\twidth: 200px;\n\t\t\t\theight: 200px;\n\t\t\t\tbackground-color: #fff; /* or transparent; will show through only if renderer alpha: true */\n\t\t\t\tborder: 1px solid black; /* or none; */\n\t\t\t\tmargin: 20px;\n\t\t\t\tpadding: 0px;\n\t\t\t\tposition: absolute;\n\t\t\t\tleft: 0px;\n\t\t\t\tbottom: 0px;\n    \t\t\t\tz-index: 100;\n\t\t\t}\n\t\t\t#inset2  {\n\t\t\t\twidth: 200px;\n\t\t\t\theight: 200px;\n\t\t\t\tbackground-color: transparent; /* or transparent; will show through only if renderer alpha: true */\n\t\t\t\tborder: 1px solid black; /* or none; */\n\t\t\t\tmargin: 20px;\n\t\t\t\tpadding: 0px;\n\t\t\t\tposition: fixed;\n\t\t\t\tright: 0px;\n\t\t\t\tbottom: 0px;\n    \t\t\t\tz-index: 100;\n\t\t\t}\n\t\t\t<!--.styling{\n\t\t\t\tbackground-color:black;\n\t\t\t\tcolor:lime;\n\t\t\t\tfont: bold 16px MS Sans Serif;\n\t\t\t\tpadding: 3px;\n\t\t\t\tposition: fixed;\n\t\t\t\tleft: 0px;\n\t\t\t\ttop: 0px;\n\t\t\t\t}-->\n\t\t\t//What is this?\n\t\t\ta {\n\t\t\t\tcolor: #000000;\n\t\t\t}\n\t\t\t//What is this?\n\t\t</style>\n\t</head>\n\t<body>\n\n\t\t<div id=\"info\"><a href=\"https://github.com/cantren/cantren.github.io/\" target=\"_blank\">Code</a></a> - Please \"fork\" as this page changes often.</div>\n\t\t<div id=\"container\">\n\t\t<div id=\"inset\">\n\t\t<script src=\"../js/three.min.js\"></script>\n\t\t\n\t\t<script src=\"../js/FirstPersonControls.js\"></script>\n\t\t<script src=\"../js/KeyboardState.js\"></script>\n\t\t<script src=\"../js/Mirror.js\"></script>\n\t\t<script src=\"../js/WaterShader.js\"></script>\n\n\t\t<script src=\"../js/Detector.js\"></script>\n\t\t<script src=\"../js/stats.min.js\"></script>\n\t\t\n\t\t<script src=\"../js/josdirksen/dat.gui.js\"></script> \n\t\t\n\t\t<script src=\"js/MTLLoader.js\"></script>\n\t\t<script type=\"text/javascript\" src=\"js/OBJMTLLoader.js\"></script>\n\n\n  \t\t<div id='inset2'>\n\t\t<object width=\"200\" height=\"200\"><param name=\"movie\" value=\"http://127.0.0.1:8090/simbox.swf\">\n\t\t<embed src=\"http://127.0.0.1:8090/simbox.swf\" width=\"200\" height=\"200\">\n\t\t</embed></object></div>\n\t\t\n\t\t\t\t\t<span id=\"digitalclock\" class=\"styling\"></span>\n\n<script>\n<!--\n\n//LCD Clock script- by javascriptkit.com\n//Visit JavaScript Kit (http://javascriptkit.com) for script\n//Credit must stay intact for use\n\nvar alternate=0\nvar standardbrowser=!document.all&&!document.getElementById\n\nif (standardbrowser)\ndocument.write('<form name=\"tick\"><input type=\"text\" name=\"tock\" size=\"11\"></form>')\n\nfunction show(){\nif (!standardbrowser)\nvar clockobj=document.getElementById? document.getElementById(\"digitalclock\") : document.all.digitalclock\n//var Digital=new Date(\"July 28, 2014 11:13:00\")\nvar RealTime=new Date()\nvar year=14\nvar month=7\nvar day=28\nvar hours=RealTime.getHours()\n//var hours=Digital.getHours()\n//var hoursReal=RealTime.getHours()\nvar minutes=RealTime.getMinutes()\n//var minutes=Digital.getMinutes()\n//var minutesReal=RealTime.getMinutes()\nvar seconds=RealTime.getSeconds()\nvar dn=\"AM\"\n\nif (hours==12) dn=\"PM\" \nif (hours>12){\ndn=\"PM\"\n//hours=hours-12\n}\n\nif (hours==0) hours=12\nif (hours.toString().length==1)\nhours=\"0\"+hours\nif (minutes<=9)\nminutes=\"0\"+minutes\nif (seconds<=9)\nseconds=\"0\"+seconds\nif (standardbrowser){\nif (alternate==0)\ndocument.tick.tock.value=hours+\" : \"+minutes+\" \"+dn\nelse\ndocument.tick.tock.value=hours+\"   \"+minutes+\" \"+dn\n}\nelse{\nif (alternate==0)\nclockobj.innerHTML=month+\" / \"+day+\" / \"+year+\"   \"+hours+\" : \"+minutes+\" : \"+seconds+\" \"+\"<sup style='font-size:70%'>\"+dn+\"</sup>\"\nelse\nclockobj.innerHTML=month+\" / \"+day+\" / \"+year+\"   \"+hours+\" : \"+minutes+\" : \"+seconds+\" \"+\"<sup style='font-size:70%'>\"+dn+\"</sup>\"\n}\nalternate=(alternate==0)? 1 : 0\nsetTimeout(\"show()\",1000)\n}\nwindow.onload=show\n\n//-->\n/*\n<p>This free script provided by<br/>\n<a href=\"http://javascriptkit.com\">JavaScript\nKit</a></p>\n*/\n</script>\n\n\n\t\t<script>\n/*\nThe MIT License\n\nCopyright © 2010-2015 three.js authors\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHERgi\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n\n#Copyright Notes:\n1)SimBox started as a JavaScript \"learning experiment\" with modifications made to code which should be attributed to the authors of the three.js examples under the MIT License \"http://threejs.org/examples/webgl_shaders_ocean.html\" and \"http://threejs.org/examples/webgl_loader_obj_mtl.html\"\n2)Significant effort has been made to track, identify, and flag all \"borrowed\" code which was used to learn the dat.gui.js and three.js libraries\n3)The most heavily \"borrowed\" code(that isn't from three.js examples) is actually from the work of a jsFiddle.net author(previously unattributed user, later identified as \"WestLangley\") who is assumed to be the same stackoverflow user who answered a question about a downward facing camera here: http://stackoverflow.com/a/16227714\n4)To the knowledge of the author of this \"index.html\" file, all \"borrowed\" code has since been mutilated/revised/changed/modified/or adapted to nullify any remaining claims to the work with the exception of the code produced by WestLangley and those works which are protected under the MIT License described above.\n*/\n\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"\n\t\t\tif ( ! Detector.webgl ) {\n\t\t\t\tDetector.addGetWebGLMessage();\n\t\t\t\tdocument.getElementById( 'container' ).innerHTML = \"\";\n\t\t\t}\n\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"\n\n\t\t\tvar container, container2, stats;//cargo cult code? comment out this line please(may be desired in future)\n\t\t\tvar camera, camera2, camControls, camControls2, scene, scene2, renderer, renderer2;//these are actually usefull\n\t\t\tvar CANVAS_WIDTH = 200,\n\t\t\t    CANVAS_HEIGHT = 200,\n\t\t\t    CAM_DISTANCE = 300;//This doesn't look like cargo cult code but should be sanity checked at some point\n\t\t\tvar clock = new THREE.Clock();//I spent a long time debugging because I forgot to initialize this\n\t\t\tvar keyboard = new KeyboardState();//this appears to help with keyboard input... Part of FPS controls/Key bindings?\n\t\t\t\n//I'll admit: I can't remember what this does or where it came from\nvar parameters = {\n\t\t\t\twidth: 2000,\n\t\t\t\theight: 2000,\n\t\t\t\twidthSegments: 250,\n\t\t\t\theightSegments: 250,\n\t\t\t\tdepth: 1500,\n\t\t\t\tparam: 4,\n\t\t\t\tfilterparam: 1\n\t\t\t}\n//I'll admit: I can't remember what this does or where it came from\t\t\t\n\t\t\tvar waterNormals;\n\t\t\tinit();\n\t\t\tanimate();\n\n\t\t\t//source: This entire \"init()\" function is very \"boilerplate\" from the examples at http://threejs.org/examples/ covered under the MIT License\n\t\t\tfunction init() {\n\t\t\t\tcontainer = document.createElement( 'div' );\n\t\t\t\tdocument.body.appendChild( container );\n\t\t\t\t\n\t\t\t\trenderer = new THREE.WebGLRenderer();\n\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\t\t\t\tcontainer.appendChild( renderer.domElement );\n\t\t\t\t\n\t\t\t\tcontainer2 = document.getElementById('inset');\n\t\t\t\t// renderer\n\t\t\t\trenderer2 = new THREE.WebGLRenderer();\n\t\t\t\trenderer2.setClearColor( 0xf0f0f0, 1 );\n\t\t\t\trenderer2.setSize( CANVAS_WIDTH, CANVAS_HEIGHT );\n\t\t\t\tcontainer2.appendChild( renderer2.domElement );\n\n\n\t\t\t\tscene = new THREE.Scene();\n\t\t\t\tscene2 = new THREE.Scene();\n\t\t\t\t\n\t\t\t\t//add water colored fog\n\t\t\t\tscene.fog = new THREE.FogExp2( 0x008080, 0.1875 );\n\t\t\t\tscene2.fog = new THREE.FogExp2( 0x008080, 0.1875 );\n\t\t\t\t\n\t\t\t\tcamera = new THREE.PerspectiveCamera(40, window.innerWidth / window.innerHeight, 0.5, 3000000);\n\t\t\t\t\n\t\t\t\tcamera.position.x = 0.0;//pool line of symetry is x axis\n\t\t\t\tcamera.position.y = -2.0;//water depth\n\t\t\t        camera.position.z = -28.0;//how close to the wall are you\n\t\t\t        camera.rotation.z = 3.06;\n\t\t\t        \n\t\t\t        camera2 = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 0.5, 3000000);\n\t\t\t        camera2.up = camera.up; // important!\n\t\t\t        \n\t\t\t        camera2.position.x = 0.0;//pool line of symetry is x axis\n\t\t\t\tcamera2.position.y = -2.0;//water depth\n\t\t\t        camera2.position.z = -28.0;//how close to the wall are you\n\t\t\t        camera.rotation.z = 3.06;\n\t\t\t\t//camera.position.set( 0, -2, -28 );\n\t\t\t\t\n\t\t\t\tcamControls = new THREE.FirstPersonControls( camera, renderer.domElement );\n\t\t\t\tcamControls.lookSpeed = 0.05; //Pitch Thrust to drag ratio\n\t\t\t\tcamControls.movementSpeed = 0.25; // FWD BKWD Thrust to drag ratio \n\t\t\t\tcamControls.verticalMin = -50.0; //basement floor level\n\t\t\t\tcamControls.verticalMax = 10.0; //sky ceiling level\n\t\t\t\t\n\t\t\t\tcamControls2 = new THREE.FirstPersonControls( camera2, renderer2.domElement );\n\t\t\t\tcamControls2.lookSpeed = 0.05; //Pitch Thrust to drag ratio\n\t\t\t\tcamControls2.movementSpeed = 0.25; // FWD BKWD Thrust to drag ratio \n\t\t\t\tcamControls2.verticalMin = -50.0; //basement floor level\n\t\t\t\tcamControls2.verticalMax = 10.0; //sky ceiling level\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t//Add scene lighting\n\t\t\t\tvar light = new THREE.HemisphereLight( 0xffffbb, 0x008080, 1 );//I tried changing the light color here to see what would happen\n\t\t\t\tlight.position.set( - 1, 1, - 1 ); //my hemisphere flipped upside down\n\t\t\t\t//scene.add( light );//I changed the name to distinguish a negative y value from \"sunlight\"\n\n\t\t\t\tvar light2 = new THREE.HemisphereLight( 0xffffbb, 0x008080, 1 );//I tried changing the light color here to see what would happen\n\t\t\t\tlight2.position.set( - 1, 1, - 1 ); //my hemisphere flipped upside down\n\t\t\t\t//scene2.add( light2 );//I changed the name to distinguish a negative y value from \"sunlight\"\n\t\t\t\t/*\n\t\t\t\t//var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );\n\t\t\t\t//directionalLight.position.set( 0, -1, 0 );\n\t\t\t\t//scene.add( directionalLight );\n\t\t\t\t\n\t\t\t\t//var directionalLight2 = new THREE.DirectionalLight( 0xffffff, 1 );\n\t\t\t\t//directionalLight2.position.set( 0, 1, 0 );\n\t\t\t\t//scene.add( directionalLight2 );\n\t\t\t\t*/\n\t\t\t\t//More scene lighting\n\t\t\t\tvar ambientLight = new THREE.AmbientLight(0xffffff);\n\t\t\t\t//scene.add(ambientLight);\n\t\t\t\t\n\t\t\t\tvar ambientLight2 = new THREE.AmbientLight(0x383838);\n\t\t\t\t//scene2.add(ambientLight2);\n\t\t\t\t\n\t\t\t\t//light up the sun\n\t\t\t\t//spotLightSUN = new THREE.SpotLight(0xFFFFFF);\n\t\t\t\t//spotLightSUN.position.set(100, 140, -130);\n\t\t\t\t//spotLightSUN.intensity = 1000;\n\t\t\t\t//scene.add(spotLightSUN);\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t//Add the three spotlights representing the sun(intensity will be modified as a function of depth)\n\t\t\t\tspotLightRED = new THREE.SpotLight(0xff0000);\n\t\t\t\tspotLightRED.position.set(100, 140, -130);\n\t\t\t\tspotLightRED.intensity = 2;\n\t\t\t\tscene.add(spotLightRED);\n\t\t\t\t\n\t\t\t\tspotLightRED2 = new THREE.SpotLight(0xff0000);\n\t\t\t\tspotLightRED2.position.set(100, 140, -130);\n\t\t\t\tspotLightRED2.intensity = .75;\n\t\t\t\tscene2.add(spotLightRED2);\n\t\t\t\t\n\t\t\t\tspotLightBLUE = new THREE.SpotLight(0x00a9ff);\n\t\t\t\tspotLightBLUE.position.set(100, 140, -130);\n\t\t\t\tspotLightBLUE.intensity = .75;\n\t\t\t\tscene.add(spotLightBLUE);\n\t\t\t\t\n\t\t\t\tspotLightBLUE2 = new THREE.SpotLight(0x00a9ff);\n\t\t\t\tspotLightBLUE2.position.set(100, 140, -130);\n\t\t\t\tspotLightBLUE2.intensity = .75;\n\t\t\t\tscene2.add(spotLightBLUE2);\n\t\t\t\t\n\t\t\t\tspotLightGREEN = new THREE.SpotLight(0x5eff00);\n\t\t\t\tspotLightGREEN.position.set(100, 140, -130);\n\t\t\t\tspotLightGREEN.intensity = .75;\n\t\t\t\tscene.add(spotLightGREEN);\n\t\t\t\t\n\t\t\t\tspotLightGREEN2 = new THREE.SpotLight(0x5eff00);\n\t\t\t\tspotLightGREEN2.position.set(100, 140, -130);\n\t\t\t\tspotLightGREEN2.intensity = .75;\n\t\t\t\tscene2.add(spotLightGREEN2);\n\t\t\t\t//Add the three spotlights representing the sun(intensity will be modified as a function of depth)\n\n\n\t\t\t\t\n\t\t\t\t// add spotlight for the shadows\n\t\t\t\t/*\n\t\t\t\tvar spotLight = new THREE.SpotLight(0xffffff);\n\t\t\t\tspotLight.position.set(100, 140, 130);\n\t\t\t\tspotLight.intensity = 2;\n\t\t\t\tscene.add(spotLight);\n\t\t\t\t\n\t\t\t\tvar spotLight2 = new THREE.SpotLight(0xffffff);\n\t\t\t\tspotLight2.position.set(100, 140, 130);\n\t\t\t\tspotLight2.intensity = 2;\n\t\t\t\tscene2.add(spotLight2);\n\t\t\t\t*/\n\n\n\t\t\t\t//load and insert the obj meshes and mtl textures\n\t\t\t\t//the \"secret sauce\" is in these .obj and .mtl files.\n\t\t\t\tvar loader = new THREE.OBJMTLLoader(); //this object does the work\n\t\t\t\tloader.load('../obj/transdec OBJ/transdec test.obj', '../obj/transdec OBJ/transdec test.mtl', function ( object ) {\n\t\t\t\t\tobject.position.y = -12.975;//experimentally generated via trial and error\n\t\t\t\t\tscene.add( object );//to make a Robosub you would likely need to change it's name from \"object\"\n\t\t\t\t\t});\n\t\t\t\tloader.load('../obj/robosub obstacles/obstacles.obj', '../obj/robosub obstacles/obstacles.mtl', function ( object ) {\n\t\t\t\t\tobject.position.y = -12.975;//experimentally generated via trial and error\n\t\t\t\t\tscene.add( object );//to make a Robosub you would likely need to change it's name from \"object\"\n\t\t\t\t\t});\n\t\t\t\tloader.load('../obj/transdec OBJ/transdec test.obj', '../obj/transdec OBJ/transdec test.mtl', function ( object ) {\n\t\t\t\t\tobject.position.y = -12.975;//experimentally generated via trial and error\n\t\t\t\t\tscene2.add( object );//to make a Robosub you would likely need to change it's name from \"object\"\n\t\t\t\t\t});\n\t\t\t\tloader.load('../obj/robosub obstacles/obstacles.obj', '../obj/robosub obstacles/obstacles.mtl', function ( object ) {\n\t\t\t\t\tobject.position.y = -12.975;//experimentally generated via trial and error\n\t\t\t\t\tscene2.add( object );//to make a Robosub you would likely need to change it's name from \"object\"\n\t\t\t\t\t});\n\n\t\t\t\twaterNormals = new THREE.ImageUtils.loadTexture( 'textures/waternormals.jpg' ); //potential for easy modification/obstacle reflections\n\t\t\t\twaterNormals.wrapS = waterNormals.wrapT = THREE.RepeatWrapping; //recycle that .jpg like a TV re-run\n\t\t\t\t//initialize/declare water shader and provide parameters\n\t\t\t\twater = new THREE.Water( renderer, camera, scene, { //three.js has a specific thing for water, this is it\n\t\t\t\t\ttextureWidth: 512, //size of waves I think, maybe the waternormals.jpg stretch?\n\t\t\t\t\ttextureHeight: 512, //size of waves I think, maybe the waternormals.jpg stretch?\n\t\t\t\t\twaterNormals: waterNormals, //provides the .jpg Texture\n\t\t\t\t\talpha: \t0.925, //how transparent is the water?\n\t\t\t\t\t//sunDirection: new THREE.Vector3( 0.70707, -0.70707, 0 ), \n\t\t\t\t\tsunDirection: light.position.clone().normalize(), // I think this makes the reflection normal to the texture\n\t\t\t\t\tsunColor: 0xffffff, //Light has to hit the water, what color is it?\n\t\t\t\t\twaterColor: 0xe7e7ec,//,0x000000,//0x001e0f,//0xe7e7ec,//0x001e0f,//water color for different effects\n\t\t\t\t\tdistortionScale: 50.0, //also related to size of waves?\n\t\t\t\t\tfog: true,\n\t\t\t\t});\n\n\t\t\t\t//initialize/declare new planes for holding the \"water\" texture mapping\n\t\t\t\tmirrorMesh = new THREE.Mesh(\n\t\t\t\t\tnew THREE.PlaneBufferGeometry( parameters.width * 500, parameters.height * 500 ),\n\t\t\t\t\twater.material\n\t\t\t\t);\n\t\t\t\tmirrorMesh2 = new THREE.Mesh(\n\t\t\t\t\tnew THREE.PlaneBufferGeometry( parameters.width * 500, parameters.height * 500 ),\n\t\t\t\t\twater.material\n\t\t\t\t);\n\t\t\t\n\t\t\t\tmirrorMesh.add( water ); //add water shader to otherwise boring underwater PlaneBufferGeometry\n\t\t\t\tmirrorMesh2.add( water ); //add water shader to otherwise boring PlaneBufferGeometry\n\t\t\t\tmirrorMesh.rotation.x = - Math.PI * 1.5; //rotate undwater water surface to point down\n\t\t\t\tmirrorMesh2.rotation.x = - Math.PI * 0.5; //rotate water surface to point up\n\t\t\t\tmirrorMesh.position.y = -.95;//water height experimentally generated via trial and error\n\t\t\t\tmirrorMesh2.position.y = -.95;//water height experimentally generated via trial and error\n\t\t\t\t\n\t\t\t\tscene.add( mirrorMesh ); //add underwater water surface\n\t\t\t\tscene.add( mirrorMesh2); //add water surface\n\t\t\t\t\n\t\t\t\t// load skybox &/or (start example code copypasta: http://threejs.org/examples/#webgl_shaders_ocean)\n\t\t\t\tvar cubeMap = new THREE.CubeTexture( [] );//initialize/declare the texture object to be mapped to the skybox mesh var skyBox = new THREE.Mesh\n\t\t\t\tcubeMap.format = THREE.RGBFormat;//don't know what this does, appears to be a type declaration?\n\t\t\t\tcubeMap.flipY = false;//if you make this true the walls of the box go below the horizon\n\n\t\t\t\t\n\t\t\t\tvar loader = new THREE.ImageLoader();\n\t\t\t\tloader.load( '../textures/skyboxsun25degtest.png', function ( image ) {\n\t\t\t\t\tvar getSide = function ( x, y ) {\n\t\t\t\t\t\tvar size = 1024;\n\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );\n\t\t\t\t\t\tcanvas.width = size;\n\t\t\t\t\t\tcanvas.height = size;\n\t\t\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\t\t\tcontext.drawImage( image, - x * size, - y * size );\n\t\t\t\t\t\treturn canvas;\n\t\t\t\t\t};\n\t\t\t\t\tcubeMap.images[ 0 ] = getSide( 2, 1 ); // px\n\t\t\t\t\tcubeMap.images[ 1 ] = getSide( 0, 1 ); // nx\n\t\t\t\t\tcubeMap.images[ 2 ] = getSide( 1, 0 ); // py\n\t\t\t\t\tcubeMap.images[ 3 ] = getSide( 1, 2 ); // ny\n\t\t\t\t\tcubeMap.images[ 4 ] = getSide( 1, 1 ); // pz\n\t\t\t\t\tcubeMap.images[ 5 ] = getSide( 3, 1 ); // nz\n\t\t\t\t\tcubeMap.needsUpdate = true;\n\t\t\t\t} );\n\n\t\t\t\tvar cubeShader = THREE.ShaderLib['cube'];\n\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;\n\n\t\t\t\t//Create skybox material \n\t\t\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {\n\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,\n\t\t\t\t\tvertexShader: cubeShader.vertexShader,\n\t\t\t\t\tuniforms: cubeShader.uniforms,\n\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t//fog: true, //To Do: make a derived shade which has been modified for \"fog\"\n\t\t\t\t\tside: THREE.BackSide\n\t\t\t\t});\n\t\t\t\t\n\t\t\t\t//Create Mesh to map skybox material on to\n\t\t\t\tvar skyBox = new THREE.Mesh(\n\t\t\t\t\tnew THREE.BoxGeometry( 10000, 10000, 10000 ),\n\t\t\t\t\tskyBoxMaterial\n\t\t\t\t);\n\t\t\t\tscene.add( skyBox ); //create Point Loma Sky\n\t\t\t\t\n\t\t\t\tvar geometry = new THREE.IcosahedronGeometry( 30, 4 );\n\t\t\t\tfor ( var i = 0, j = geometry.faces.length; i < j; i ++ ) {\n\t\t\t\t\tgeometry.faces[ i ].color.setHex( 0xffffff );\n\t\t\t\t}\n\t\t\t\tvar material = new THREE.MeshPhongMaterial( {\n\t\t\t\t\tvertexColors: THREE.FaceColors,\n\t\t\t\t\tshininess: 100000,\n\t\t\t\t\tenvMap: cubeMap\n\t\t\t\t} );\n\t\t\t\tsphere = new THREE.Mesh( geometry, material );\n\t\t\t\tscene.add( sphere );\n\t\t\t\t\n\t\t\t\tvar geometry2 = new THREE.IcosahedronGeometry( 10, 4 );\n\t\t\t\tfor ( var i = 0, j = geometry.faces.length; i < j; i ++ ) {\n\t\t\t\t\tgeometry.faces[ i ].color.setHex( 0xffff00 );\n\t\t\t\t}\n\t\t\t\tvar material2 = new THREE.MeshPhongMaterial( {\n\t\t\t\t\tvertexColors: THREE.FaceColors,\n\t\t\t\t\tshininess: 100,\n\t\t\t\t\tenvMap: cubeMap\n\t\t\t\t} );\n\t\t\t\tsphere2 = new THREE.Mesh( geometry2, material2 );\n\t\t\t\t//scene.add( sphere2 );\n\t\t\t\t\n\t\t\t}\n\t\t\t//source: This entire \"init()\" function is very \"boilerplate\" from the examples at http://threejs.org/examples/ covered under the MIT License\n\t\t\t//attribution: Please see the \"MIT License\" included in this document\n\n\t\t\t//source: This code no longer appears to contain anything that belongs to http://www.smartjava.org/ltjs/chapter-09/02-selecting-objects.html\n\t\t\tvar guivalues = new function () {\n\t\t\t\t\t\n\t\t\t\t    this.timeShift = 0;\n\t\t\t\t    this.getLostBoth = function(){\n\t\t\t\t    \tcamera.position.x = (Math.random() * 90.0);\n\t\t\t\t    \tcamera.position.x -=45.0;\n\t\t\t\t    \tcamera.position.y = (Math.random() * -5.5);\n\t\t\t\t    \tcamera.position.z = (Math.random() * 60.0);\n\t\t\t\t    \tcamera.position.z -= 30.0;\n       \t\t\t\t    \tcamera.rotation.z = (Math.random() * (Math.PI*2.0));\n       \t\t\t\t    \tcamera.rotation.z -= Math.PI;\n\t\t\t\t    };\n\t\t\t\t    this.getLostComp = function(){\n\t\t\t\t    \tcamera.position.x = (Math.random() * -45.0);\n\t\t\t\t    \tcamera.position.y = (Math.random() * -5.5);\n\t\t\t\t    \tcamera.position.z = (Math.random() * 60.0);\n\t\t\t\t    \tcamera.position.z -= 30.0;\n       \t\t\t\t    \tcamera.rotation.z = (Math.random() * (Math.PI*2.0));\n       \t\t\t\t    \tcamera.rotation.z -= Math.PI;\n\t\t\t\t    };\n\t\t\t\t    this.getLostPract = function(){\n\t\t\t\t    \tcamera.position.x = (Math.random() * 45.0);\n\t\t\t\t    \tcamera.position.y = (Math.random() * -5.5);\n\t\t\t\t    \tcamera.position.z = (Math.random() * 60.0);\n\t\t\t\t    \tcamera.position.z -= 30.0;\n\n       \t\t\t\t    \tcamera.rotation.z = (Math.random() * (Math.PI*2.0));\n       \t\t\t\t    \tcamera.rotation.z -= Math.PI;\n\t\t\t\t    };\n\t\t\t\t    this.lightDepthFix = function(){\n\t\t\t\t\tintensity = .85;\n\t\t\t\t\tdepthcm = (camera2.position.y + (0.9)) * (-100.0);\n\t\t\t\t\tadjIntensityRED = (intensity * (Math.exp(-.006 * depthcm)));\n\t\t\t\t\tadjIntensityGREEN = (intensity * (Math.exp(-.00032 * depthcm)));\n\t\t\t\t\tadjIntensityBLUE = (intensity * (Math.exp(-.000247 * depthcm)));\n\t\t\t\t\tspotLightRED.intensity = adjIntensityRED;\n\t\t\t\t\tspotLightRED2.intensity = adjIntensityRED;\n\t\t\t\t\tspotLightGREEN.intensity = adjIntensityGREEN;\n\t\t\t\t\tspotLightGREEN2.intensity = adjIntensityGREEN;\n\t\t\t\t\tspotLightBLUE.intensity = adjIntensityBLUE;\n\t\t\t\t\tspotLightBLUE2.intensity = adjIntensityBLUE;\n\t\t\t\t    };\n\t\t\t\t    this.normalLight = function(){\n\t\t\t\t\tvar nintensity = 0.85;\n\t\t\t\t\tspotLightRED.intensity = nintensity;\n\t\t\t\t\tspotLightRED2.intensity = nintensity;\n\t\t\t\t\tspotLightGREEN.intensity = nintensity;\n\t\t\t\t\tspotLightGREEN2.intensity = nintensity;\n\t\t\t\t\tspotLightBLUE.intensity = nintensity;\n\t\t\t\t\tspotLightBLUE2.intensity = nintensity;\n\t\t\t\t    \t//scene.spotLight.intensity = (Math.random() * 5.0);\n\t\t\t\t    \t//scene2.spotLight2.intensity = (Math.random() * 5.0);\n\t\t\t\t    };\n\t\t\t\t    this.randomVis = function(){\n\t\t\t\t    \tfdensity = (Math.random() * .75);\n\t\t\t\t\tscene.fog.density = fdensity;\n\t\t\t\t\tscene2.fog.density = fdensity;\n\t\t\t\t    \t\n\t\t\t\t\trintensity = (Math.random() * 0.6667);\n\t\t\t\t\t\n\t\t\t\t\tspotLightRED.intensity = rintensity;\n\t\t\t\t\tspotLightRED2.intensity = rintensity;\n\t\t\t\t\tspotLightGREEN.intensity = rintensity;\n\t\t\t\t\tspotLightGREEN2.intensity = rintensity;\n\t\t\t\t\tspotLightBLUE.intensity = rintensity;\n\t\t\t\t\tspotLightBLUE2.intensity = rintensity;\n\n\t\t\t\t    };\n\t\t\t\t}\n\t\t\t//source: This code no longer appears to contain anything that belongs to http://www.smartjava.org/ltjs/chapter-09/02-selecting-objects.html\n\n\t\t\t\t\n\t\t\t//source: This code no longer appears to contain anything that belongs to http://nuevil.com/index3.html\n\t\t\tvar gui = new dat.GUI({resizable : false});\n\t\t\tvar folder1 = gui.addFolder('visibility');\n\t\t\tvar fogDensity = folder1.add(scene2.fog, 'density').min(0.00).max(0.75).step(0.01).listen();\n\t\t\tvar lightIntensity = folder1.add(spotLightRED, 'intensity').min(0.00).max(2.0).step(0.01).listen();\n\t\t\tvar timeOfDay = folder1.add(guivalues, 'timeShift').min(-6.0).max(6.0).step(0.01).listen();\n\t\t\tvar folder2 = gui.addFolder('behavior');\n\t\t\tvar rotSpeed = folder2.add(camControls2, 'lookSpeed').min(0.0).max(0.5).step(0.01).listen();\n\t\t\tvar movSpeed = folder2.add(camControls2, 'movementSpeed').min(0.0).max(5.0).step(0.01).listen();\n\t\t\tvar folder3 = gui.addFolder('position');\n  \t\t\tvar posX = folder3.add( camera2.position, 'x' ).min(-50.00).max(50.00).step(0.01).listen();\n  \t\t\tvar posY = folder3.add( camera2.position, 'y' ).min(-50.00).max(50.00).step(0.01).listen();\n  \t\t\tvar posZ = folder3.add( camera2.position, 'z' ).min(-50.00).max(50.00).step(0.01).listen();\n  \t\t\tvar folder4 = gui.addFolder('rotation');\n  \t\t\tvar rotZ = folder4.add( camera.rotation, 'z' ).min(-5.00).max(5.00).step(0.01).listen();\n  \t\t\tvar folder5 = gui.addFolder('confusion');\n  \t\t\tvar rVis = gui.add(guivalues, 'randomVis');\n  \t\t\tvar rPosHead = gui.add(guivalues, 'getLostBoth');\n  \t\t\tvar rPosHeadComp = gui.add(guivalues, 'getLostComp');\n  \t\t\tvar rPosHeadPract = gui.add(guivalues, 'getLostPract');\n  \t\t\t//source: This code no longer appears to contain anything that belongs to http://nuevil.com/index3.html\n\n  \t\t\tposX.onChange( function(value){   camera2.position.x = value; camera.position.x = value;   } );\n  \t\t\tposY.onChange( function(value){   camera2.position.y = value; camera.position.y = value;   } );\n\t\t\tposZ.onChange( function(value){   camera2.position.z = value; camera.position.z = value;   } );\n\t\t\trotZ.onChange( function(value){   camera.rotation.z = value; camera.rotation.z = value;   } );\n\t\t\t//source:http://nuevil.com/index3.html\n\n\t\t\t//source: This code no longer appears to contain anything that belongs to Rudie Dirkx http://hotblocks.nl/tests/three/dat.gui.html \n\t\t\tfogDensity.onChange( function(value){   scene2.fog.density = value; scene.fog.density = value;   });\n  \t\t\trotSpeed.onChange( function(value){   camControls2.lookSpeed = value; camControls.lookSpeed = value;   });\n\t\t\tmovSpeed.onChange( function(value){   camControls2.movementSpeed = value; camControls.movementSpeed = value;  });\n\t\t\tlightIntensity.onChange( function(value){   spotLightRED2.intensity = value; spotLightRED.intensity = value;   });\n\t\t\ttimeOfDay.onChange( function(value){   guivalues.timeShift = value; });\n\t\t\t//source: This code no longer appears to contain anything that belongs to Rudie Dirkx http://hotblocks.nl/tests/three/dat.gui.html \n\n\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"\n\t\t\tfunction animate() {\n\t\t\t\trequestAnimationFrame( animate ); //animate the frame\n\t\t\t\trender(); //render the frame\n\t\t\t}\n\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"\n\n\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"\n\t\t\tfunction render() {\n\t\t\t\tkeyboard.update();\n\t\t\t\tcamControls.update( clock.getDelta() ); //update First Person Camera\n\t\t\t\tcamControls2.update( clock.getDelta() ); //update First Person Camera\n\t\t\t\tcamera2.position.copy( camera.position );\n\t\t\t\tcamera2.rotation.copy( camera.rotation );\n\t\t\t\tcamera2.up = new THREE.Vector3(-1,-1,-1);\n\t\t\t\tcamera2.rotateX(Math.PI/-2);\n\t\t\t\tcamera2.rotateZ((Math.PI/-2));\n\t\t\t\tcamera2.rotateZ(Math.PI/2);\n\t\t\t\t//if (1==1){guivalues.lightDepthFix();}\n\t\t\t\tvar time = performance.now() * 0.001; //Measure time for water\n\t\t\t\tvar timeSolar = performance.now() * 0.000000003472 + 32470000 + 3 * 3600000; //Measure time for water\n\t\t\t\t\n\t\t\t\twater.material.uniforms.time.value += 1.0 / 60.0; //speed of water motion(wind chop)\n\t\t\t\twater.render(); //render water surface\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t//source:https://github.com/dirkk0/threejs_daynight/blob/master/index.html\n\t\t\t\tvar nsin = Math.sin(timeSolar);\n\t\t\t\tvar ncos = Math.cos(timeSolar);\n\t\t\t\t// set the sun\n\t\t\t\tspotLightRED.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);\n\t\t\t\tspotLightRED.lookAt (0,0,0);\n\t\t\t\t//spotLightRED2.position.copy( spotLightRED );\n\t\t\t\tspotLightRED2.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);\n\t\t\t\tspotLightRED2.lookAt (0,0,0);\n\t\t\t\t//spotLightGREEN.position.copy( spotLightRED );\n\t\t\t\tspotLightGREEN.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);\n\t\t\t\tspotLightGREEN.lookAt (0,0,0);\n\t\t\t\t//spotLightGREEN2.position.copy( spotLightRED );\n\t\t\t\tspotLightGREEN2.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);\n\t\t\t\tspotLightGREEN2.lookAt (0,0,0);\n\t\t\t\t//spotLightBLUE.position.copy( spotLightRED );\n\t\t\t\tspotLightBLUE.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);\n\t\t\t\tspotLightBLUE.lookAt (0,0,0);\n\t\t\t\t//spotLightBLUE2.position.copy( spotLightRED );\n\t\t\t\tspotLightBLUE2.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);\n\t\t\t\tspotLightBLUE2.lookAt (0,0,0);\n\t\t\t\t//source:https://github.com/dirkk0/threejs_daynight/blob/master/index.html\n\t\t\t\t//spotLightSUN.position.set( -1900*ncos, 1900*nsin, 1425*ncos+1000);\n\t\t\t\t//spotLightSUN.lookAt ( spotLightRED.position );\n\n\n\t\t\t\tsphere.position.copy( spotLightRED.position );\n\t\t\t\t//sphere2.position.copy( spotLightSUN.position );\n\n\t\t\t\tvar lightFix = new function(){\n\t\t\t\t\tthis.lightDepthFix = function(){\n\t\t\t\t\tintensity = .95;\n\t\t\t\t\tdepthcm = (camera2.position.y + (0.9)) * (-100.0);\n\t\t\t\t\tadjIntensityRED = (intensity * (Math.exp(-.006 * depthcm)));\n\t\t\t\t\tadjIntensityGREEN = (intensity * (Math.exp(-.00032 * depthcm)));\n\t\t\t\t\tadjIntensityBLUE = (intensity * (Math.exp(-.000247 * depthcm)));\n\t\t\t\t\tspotLightRED.intensity = adjIntensityRED;\n\t\t\t\t\tspotLightRED2.intensity = adjIntensityRED;\n\t\t\t\t\tspotLightGREEN.intensity = adjIntensityGREEN;\n\t\t\t\t\tspotLightGREEN2.intensity = adjIntensityGREEN;\n\t\t\t\t\tspotLightBLUE.intensity = adjIntensityBLUE;\n\t\t\t\t\tspotLightBLUE2.intensity = adjIntensityBLUE;\n\t\t\t\t    };\n\t\t\t\t}\n\t\t\t\tif ( keyboard.pressed(\"shift\") ){//almost positive this is original code\n\t\t\t\t\tcamControls2.movementSpeed = 2.0;//note: it also doesn't work properly\n\t\t\t\t\tcamControls2.lookSpeed = 0.15;//note: it also doesn't work properly\n\t\t\t\t\tcamControls.movementSpeed = 2.0;//note: it also doesn't work properly\n\t\t\t\t\tcamControls.lookSpeed = 0.15;//note: it also doesn't work properly\n\t\t\t\t\t}\n\t\t\t\tif ( keyboard.pressed(\"ctrl\") ){//almost positive this is original code\n\t\t\t\t\tcamControls2.movementSpeed = 0.25;//note: it also doesn't work properly\n\t\t\t\t\tcamControls2.lookSpeed = 0.05;//note: it also doesn't work properly\n\t\t\t\t\tcamControls.movementSpeed = 0.25;//note: it also doesn't work properly\n\t\t\t\t\tcamControls.lookSpeed = 0.05;//note: it also doesn't work properly\n\t\t\t\t\t}\n\t\t\t\tif ( keyboard.pressed(\"E\") ){//almost positive this is original code\n\t\t\t\t\tcamera2.rotateY(Math.PI/-1);//original code\n\t\t\t\t\tcamera2.rotateZ((Math.PI)/-1);//original code\n\t\t\t\t\t}//this line is probably safe :P\n\t\t\t\tif ( keyboard.pressed(\"J\") ) {guivalues.getLostBoth();}\n\t\t\t\tif ( keyboard.pressed(\"K\") ) {guivalues.getLostComp();}\n\t\t\t\tif ( keyboard.pressed(\"L\") ) {guivalues.getLostPract();}\n\t\t\t\tif ( keyboard.pressed(\"P\") ) {lightFix.lightDepthFix();}\n\t\t\t\tif ( keyboard.pressed(\"V\") ) {\n\t\t\t\t\t//guivalues.lightDepthFix();\n\t\t\t\t\tguivalues.randomVis();\n\t\t\t\t}\n\t\t\t\tlightFix.lightDepthFix();\n\t\t\t\t//if ( true ) {\n\t\t\t\t\t//guivalues.lightDepthFix();\n\n\t\t\t\t//}\n\t\t\t\tif ( camera2.position.y > -0.80) { //cheap hack to bypass the fog entangling impact of using a single .obj/.mtl file above and below water\n\t\t\t\t\t\tscene2.fog.density = 0.0; \n\t\t\t\t\t\tscene.fog.density = 0.0;\n\t\t\t\t\t\tguivalues.normalLight();\n\t\t\t\t\t}\n\t\t\t\tif ( camera2.position.y < -0.81 && camera2.position.y > -.9) { //cheap hack to bypass the fog entangling impact of using a single .obj/.mtl file above and below water\n\t\t\t\t\t\tscene2.fog.density = 0.1875; \n\t\t\t\t\t\tscene.fog.density = 0.1875;\n\t\t\t\t\t}\n\t\t\t\t\t\n\t\t\t\tif ( camera2.position.y < -5.5 ) { //cheap hack to bound behavior\n\t\t\t\t\t\tcamera2.position.y = -5.5; \n\t\t\t\t\t\tcamera.position.y = -5.5; \n\t\t\t\t\t}\n\t\t\t\tif ( camera2.position.y > 5.5 ) { //cheap hack to bound behavior\n\t\t\t\t\t\tcamera2.position.y = 5.5; \n\t\t\t\t\t\tcamera.position.y = 5.5; \n\t\t\t\t\t}\n\n\t\t\t\t\n\t\t\t\trenderer.render( scene, camera ); //render everything else\n\t\t\t\trenderer2.render( scene2, camera2 ); //render everything else\n\t\t\t}\n\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"\n\n\t\t</script>\n\t</body>\n</html>\n","undoManager":{"mark":3,"position":5,"stack":[[{"start":{"row":157,"column":0},"end":{"row":158,"column":0},"action":"insert","lines":["\t\t\t\t",""],"id":1,"ignore":true},{"start":{"row":160,"column":0},"end":{"row":162,"column":0},"action":"insert","lines":["\t\t\t\t//scene.fog = new THREE.FogExp2( 0x008080, 0.05 );","\t\t\t\t//scene2.fog = new THREE.FogExp2( 0x008080, 0.05 );",""]},{"start":{"row":178,"column":37},"end":{"row":178,"column":38},"action":"remove","lines":["1"]},{"start":{"row":178,"column":37},"end":{"row":178,"column":39},"action":"insert","lines":["05"]},{"start":{"row":179,"column":39},"end":{"row":179,"column":42},"action":"remove","lines":["1.0"]},{"start":{"row":179,"column":39},"end":{"row":179,"column":43},"action":"insert","lines":["0.25"]},{"start":{"row":267,"column":4},"end":{"row":267,"column":6},"action":"remove","lines":["//"]},{"start":{"row":268,"column":4},"end":{"row":268,"column":6},"action":"remove","lines":["//"]}],[{"start":{"row":15,"column":0},"end":{"row":16,"column":0},"action":"remove","lines":["",""],"id":2,"ignore":true},{"start":{"row":21,"column":0},"end":{"row":22,"column":0},"action":"remove","lines":["\t\t\t",""]},{"start":{"row":32,"column":4},"end":{"row":47,"column":0},"action":"remove","lines":["","","                        #inset3  {","                                width: 728px;","                                height: 728px;","\t\t\t\tbackground-color: transparent;","                                border: 1px solid black; /* or none; */","                                margin: 20px;","                                padding: 0px;","                                position: fixed;","                                right: 298px;","                                bottom: 0px;","                                z-index: 200;","                        }","",""]},{"start":{"row":45,"column":0},"end":{"row":46,"column":0},"action":"remove","lines":["",""]},{"start":{"row":45,"column":0},"end":{"row":45,"column":18},"action":"insert","lines":["\t\t\t//What is this?"]},{"start":{"row":47,"column":0},"end":{"row":48,"column":0},"action":"remove","lines":["",""]},{"start":{"row":49,"column":0},"end":{"row":49,"column":18},"action":"insert","lines":["\t\t\t//What is this?"]},{"start":{"row":58,"column":0},"end":{"row":59,"column":0},"action":"remove","lines":["",""]},{"start":{"row":58,"column":0},"end":{"row":58,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":60,"column":0},"end":{"row":61,"column":0},"action":"insert","lines":["\t\t<script src=\"../js/KeyboardState.js\"></script>",""]},{"start":{"row":68,"column":0},"end":{"row":68,"column":2},"action":"insert","lines":["\t\t"]},{"start":{"row":78,"column":3},"end":{"row":81,"column":0},"action":"remove","lines":["div id=\"inset3\">","","\t\t<script>",""]},{"start":{"row":78,"column":3},"end":{"row":108,"column":105},"action":"insert","lines":["script>","/*","The MIT License","","Copyright © 2010-2015 three.js authors","","Permission is hereby granted, free of charge, to any person obtaining a copy","of this software and associated documentation files (the \"Software\"), to deal","in the Software without restriction, including without limitation the rights","to use, copy, modify, merge, publish, distribute, sublicense, and/or sell","copies of the Software, and to permit persons to whom the Software is","furnished to do so, subject to the following conditions:","","The above copyright notice and this permission notice shall be included in","all copies or substantial portions of the Software.","","THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR","IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,","FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE","AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER","LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,","OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN","THE SOFTWARE.","","#Copyright Notes:","1)SimBox started as a JavaScript \"learning experiment\" with modifications made to code which should be attributed to the authors of the three.js examples under the MIT License \"http://threejs.org/examples/webgl_shaders_ocean.html\" and \"http://threejs.org/examples/webgl_loader_obj_mtl.html\"","2)Significant effort has been made to track, identify, and flag all \"borrowed\" code which was used to learn the dat.gui.js and three.js libraries","3)The most heavily \"borrowed\" code(that isn't from three.js examples) is actually from the work of a jsFiddle.net author(previously unattributed user, later identified as \"WestLangley\") who is assumed to be the same stackoverflow user who answered a question about a downward facing camera here: http://stackoverflow.com/a/16227714","4)To the knowledge of the author of this \"index.html\" file, all \"borrowed\" code has since been mutilated/revised/changed/modified/or adapted to nullify any remaining claims to the work with the exception of the code produced by WestLangley and those works which are protected under the MIT License described above.","*/","\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\""]},{"start":{"row":110,"column":0},"end":{"row":111,"column":0},"action":"remove","lines":["",""]},{"start":{"row":112,"column":0},"end":{"row":113,"column":0},"action":"remove","lines":["",""]},{"start":{"row":112,"column":4},"end":{"row":113,"column":105},"action":"insert","lines":["","\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\""]},{"start":{"row":115,"column":53},"end":{"row":115,"column":54},"action":"insert","lines":["?"]},{"start":{"row":117,"column":0},"end":{"row":118,"column":0},"action":"remove","lines":["\t\t\tvar sphere;//cargo cult code delete this line please",""]},{"start":{"row":119,"column":26},"end":{"row":121,"column":3},"action":"remove","lines":["","\t\t\t","\t\t\t"]},{"start":{"row":119,"column":26},"end":{"row":119,"column":109},"action":"insert","lines":["//This doesn't look like cargo cult code but should be sanity checked at some point"]},{"start":{"row":121,"column":0},"end":{"row":123,"column":0},"action":"remove","lines":["","",""]},{"start":{"row":121,"column":3},"end":{"row":124,"column":0},"action":"insert","lines":["var keyboard = new KeyboardState();//this appears to help with keyboard input... Part of FPS controls/Key bindings?","\t\t\t","//I'll admit: I can't remember what this does or where it came from",""]},{"start":{"row":133,"column":0},"end":{"row":133,"column":67},"action":"insert","lines":["//I'll admit: I can't remember what this does or where it came from"]},{"start":{"row":135,"column":0},"end":{"row":136,"column":0},"action":"remove","lines":["",""]},{"start":{"row":138,"column":0},"end":{"row":139,"column":0},"action":"insert","lines":["\t\t\t//source: This entire \"init()\" function is very \"boilerplate\" from the examples at http://threejs.org/examples/ covered under the MIT License",""]},{"start":{"row":147,"column":0},"end":{"row":148,"column":0},"action":"remove","lines":["",""]},{"start":{"row":147,"column":0},"end":{"row":147,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":162,"column":4},"end":{"row":162,"column":6},"action":"insert","lines":["//"]},{"start":{"row":163,"column":0},"end":{"row":164,"column":0},"action":"insert","lines":["\t\t\t\tscene.fog = new THREE.FogExp2( 0x008080, 0.1875 );",""]},{"start":{"row":170,"column":24},"end":{"row":170,"column":26},"action":"insert","lines":["0."]},{"start":{"row":171,"column":33},"end":{"row":171,"column":35},"action":"insert","lines":[".0"]},{"start":{"row":172,"column":34},"end":{"row":172,"column":36},"action":"insert","lines":[".0"]},{"start":{"row":173,"column":0},"end":{"row":174,"column":0},"action":"insert","lines":["\t\t\t        camera.rotation.z = 3.06;",""]},{"start":{"row":178,"column":32},"end":{"row":178,"column":34},"action":"insert","lines":["0."]},{"start":{"row":179,"column":34},"end":{"row":179,"column":36},"action":"insert","lines":[".0"]},{"start":{"row":180,"column":35},"end":{"row":180,"column":37},"action":"insert","lines":[".0"]},{"start":{"row":181,"column":0},"end":{"row":182,"column":0},"action":"insert","lines":["\t\t\t        camera.rotation.z = 3.06;",""]},{"start":{"row":184,"column":62},"end":{"row":184,"column":83},"action":"insert","lines":[", renderer.domElement"]},{"start":{"row":190,"column":64},"end":{"row":190,"column":86},"action":"insert","lines":[", renderer2.domElement"]},{"start":{"row":252,"column":13},"end":{"row":252,"column":16},"action":"remove","lines":["1.0"]},{"start":{"row":252,"column":13},"end":{"row":252,"column":18},"action":"insert","lines":["0.925"]},{"start":{"row":258,"column":0},"end":{"row":259,"column":0},"action":"insert","lines":["\t\t\t\t\tfog: true,",""]},{"start":{"row":270,"column":0},"end":{"row":270,"column":3},"action":"insert","lines":["\t\t\t"]},{"start":{"row":275,"column":0},"end":{"row":278,"column":0},"action":"insert","lines":["\t\t\t\tmirrorMesh.position.y = -0.85;//water height experimentally generated via trial and error","\t\t\t\tmirrorMesh2.position.y = -0.9;//water height experimentally generated via trial and error","\t\t\t\t",""]},{"start":{"row":279,"column":48},"end":{"row":279,"column":49},"action":"remove","lines":[" "]},{"start":{"row":280,"column":0},"end":{"row":280,"column":4},"action":"insert","lines":["\t\t\t\t"]},{"start":{"row":283,"column":50},"end":{"row":286,"column":96},"action":"remove","lines":["or care","\t\t\t\tcubeMap.flipY = false;//if you make this true the walls of the box go below the horizon","","\t\t\t\t//var cubeMap2 = new THREE.CubeTexture( [] );//initialize/declare the texture object to be m"]},{"start":{"row":283,"column":50},"end":{"row":283,"column":66},"action":"insert","lines":["what this does, "]},{"start":{"row":283,"column":70},"end":{"row":283,"column":71},"action":"remove","lines":["d"]},{"start":{"row":283,"column":70},"end":{"row":283,"column":73},"action":"insert","lines":["ars"]},{"start":{"row":283,"column":77},"end":{"row":284,"column":60},"action":"remove","lines":["the skybox mesh var skyBox = new THREE.Mesh","\t\t\t\t//cubeMap2.format = THREE.RGBFormat;//don't know or care"]},{"start":{"row":283,"column":77},"end":{"row":283,"column":99},"action":"insert","lines":["be a type declaration?"]},{"start":{"row":284,"column":4},"end":{"row":284,"column":6},"action":"remove","lines":["//"]},{"start":{"row":284,"column":11},"end":{"row":284,"column":12},"action":"remove","lines":["2"]},{"start":{"row":284,"column":20},"end":{"row":284,"column":23},"action":"remove","lines":["tru"]},{"start":{"row":284,"column":20},"end":{"row":284,"column":24},"action":"insert","lines":["fals"]},{"start":{"row":286,"column":0},"end":{"row":287,"column":0},"action":"insert","lines":["\t\t\t\t",""]},{"start":{"row":289,"column":0},"end":{"row":290,"column":0},"action":"remove","lines":["",""]},{"start":{"row":290,"column":0},"end":{"row":291,"column":0},"action":"remove","lines":["",""]},{"start":{"row":291,"column":0},"end":{"row":292,"column":0},"action":"remove","lines":["",""]},{"start":{"row":294,"column":0},"end":{"row":295,"column":0},"action":"remove","lines":["",""]},{"start":{"row":296,"column":0},"end":{"row":297,"column":0},"action":"remove","lines":["",""]},{"start":{"row":297,"column":0},"end":{"row":298,"column":0},"action":"remove","lines":["",""]},{"start":{"row":298,"column":0},"end":{"row":299,"column":0},"action":"remove","lines":["",""]},{"start":{"row":305,"column":0},"end":{"row":306,"column":0},"action":"remove","lines":["",""]},{"start":{"row":306,"column":0},"end":{"row":306,"column":4},"action":"remove","lines":["\t\t\t\t"]},{"start":{"row":307,"column":4},"end":{"row":307,"column":6},"action":"remove","lines":["//"]},{"start":{"row":307,"column":8},"end":{"row":307,"column":10},"action":"remove","lines":["lo"]},{"start":{"row":307,"column":8},"end":{"row":307,"column":14},"action":"insert","lines":["cubeSh"]},{"start":{"row":307,"column":18},"end":{"row":307,"column":19},"action":"remove","lines":["2"]},{"start":{"row":307,"column":20},"end":{"row":307,"column":24},"action":"remove","lines":[" new"]},{"start":{"row":307,"column":27},"end":{"row":310,"column":0},"action":"remove","lines":["ImageLoader();","\t\t\t\t//loader2.load( '../textures/skyboxsun25degtest.png', function ( image2 ) {","",""]},{"start":{"row":307,"column":27},"end":{"row":310,"column":29},"action":"insert","lines":["ShaderLib['cube'];","\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;","","\t\t\t\t//Create skybox material "]},{"start":{"row":311,"column":3},"end":{"row":311,"column":6},"action":"remove","lines":["\t//"]},{"start":{"row":311,"column":8},"end":{"row":397,"column":0},"action":"remove","lines":["getSide = function ( x, y ) {","","//\t\t\t\t\t\tvar size = 1024;","","//\t\t\t\t\t\tvar canvas2 = document.createElement( 'canvas2' );","//\t\t\t\t\t\tcanvas2.width = size;","//\t\t\t\t\t\tcanvas2.height = size;","","//\t\t\t\t\t\tvar context2 = canvas2.getContext( '2d' );","//\t\t\t\t\t\tcontext2.drawImage( image2, - x * size, - y * size );","","//\t\t\t\t\t\treturn canvas2;","","//\t\t\t\t\t};","","//\t\t\t\t\tcubeMap2.images[ 0 ] = getSide( 2, 1 ); // px","//\t\t\t\t\tcubeMap2.images[ 1 ] = getSide( 0, 1 ); // nx","//\t\t\t\t\tcubeMap2.images[ 2 ] = getSide( 1, 0 ); // py","//\t\t\t\t\tcubeMap2.images[ 3 ] = getSide( 1, 2 ); // ny","//\t\t\t\t\tcubeMap2.images[ 4 ] = getSide( 1, 1 ); // pz","//\t\t\t\t\tcubeMap2.images[ 5 ] = getSide( 3, 1 ); // nz","//\t\t\t\t\tcubeMap2.needsUpdate = true;","","//\t\t\t\t} );","\t\t\t\t//Initialize/declare the shader for the skybox","\t\t\t\tvar cubeShader = THREE.ShaderLib['cube'];","\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;","\t\t\t\t","//\t\t\t\tvar cubeShader2 = THREE.ShaderLib['cube'];","//\t\t\t\tcubeShader2.uniforms['tCube'].value = cubeMap2;","\t\t\t\t","\t\t\t\t//Create skybox material ","\t\t\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {","\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,","\t\t\t\t\tvertexShader: cubeShader.vertexShader,","\t\t\t\t\tuniforms: cubeShader.uniforms,","\t\t\t\t\tdepthWrite: false,","\t\t\t\t\tside: THREE.BackSide","\t\t\t\t});","//\t\t\t\tvar skyBoxMaterial2 = new THREE.ShaderMaterial( {","//\t\t\t\t\tfragmentShader: cubeShader2.fragmentShader,","//\t\t\t\t\tvertexShader: cubeShader2.vertexShader,","//\t\t\t\t\tuniforms: cubeShader2.uniforms,","//\t\t\t\t\tdepthWrite: false,","//\t\t\t\t\tside: THREE.BackSide","//\t\t\t\t});","","\t\t\t\t//Create Mesh to map skybox material on to","\t\t\t\tvar skyBox = new THREE.Mesh(","\t\t\t\t\tnew THREE.BoxGeometry( 10000, 10000, 10000 ),","\t\t\t\t\tskyBoxMaterial","\t\t\t\t);","\t\t\t\tscene.add( skyBox ); //create Point Loma Sky","","//\t\t\t\tvar skyBox2 = new THREE.Mesh(","//\t\t\t\t\tnew THREE.BoxGeometry( 10000, 10000, 10000 ),","//\t\t\t\t\tskyBoxMaterial2","//\t\t\t\t);","","\t\t\t\t//var skyBox2 = new THREE.Mesh(","\t\t\t\t//\tnew THREE.BoxGeometry( 10000, -10000, 10000 ),","\t\t\t\t//\tskyBoxMaterial","\t\t\t\t//);","//\t\t\t\tscene.add( skyBox2 );","","","\t\t\t}","","\t\t\t//source:http://www.smartjava.org/ltjs/chapter-09/02-selecting-objects.html","\t\t\tvar controls = new function () {","\t\t\t            this.fogDensity = 0.1875;","        \t\t\t    this.lookSpeed = 0.03;","        \t\t\t    this.movementSpeed = 0.03;","        \t\t\t}","","        \t\tvar gui = new dat.GUI();","        \t\t//gui.add(init, 'fogDensity', 0, 0.25);","        \t\tgui.add(controls, 'fogDensity', 0, 0.25);","        \t\tgui.add(controls, 'lookSpeed', 0, 0.5);","        \t\tgui.add(controls, 'movementSpeed', 0, 0.5);","        \t\t//source:http://www.smartjava.org/ltjs/chapter-09/02-selecting-objects.html","        \t\t\t","","","","\t\t\t//",""]},{"start":{"row":311,"column":8},"end":{"row":404,"column":105},"action":"insert","lines":["skyBoxMaterial = new THREE.ShaderMaterial( {","\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,","\t\t\t\t\tvertexShader: cubeShader.vertexShader,","\t\t\t\t\tuniforms: cubeShader.uniforms,","\t\t\t\t\tdepthWrite: false,","\t\t\t\t\t//fog: true, //To Do: make a derived shade which has been modified for \"fog\"","\t\t\t\t\tside: THREE.BackSide","\t\t\t\t});","\t\t\t\t","\t\t\t\t//Create Mesh to map skybox material on to","\t\t\t\tvar skyBox = new THREE.Mesh(","\t\t\t\t\tnew THREE.BoxGeometry( 10000, 10000, 10000 ),","\t\t\t\t\tskyBoxMaterial","\t\t\t\t);","\t\t\t\tscene.add( skyBox ); //create Point Loma Sky","\t\t\t}","\t\t\t//source: This entire \"init()\" function is very \"boilerplate\" from the examples at http://threejs.org/examples/ covered under the MIT License","\t\t\t//attribution: Please see the \"MIT License\" included in this document","","        \t\t//source: This code no longer appears to contain anything that belongs to http://www.smartjava.org/ltjs/chapter-09/02-selecting-objects.html","\t\t\tvar guivalues = new function () {","\t\t\t\t    this.fogLastValue = 0;","\t\t\t\t    this.aboveWater = false;","        \t\t\t    this.getLostBoth = function(){","        \t\t\t    \tcamera.position.x = (Math.random() * 90.0);","        \t\t\t    \tcamera.position.x -=45.0;","        \t\t\t    \tcamera.position.y = (Math.random() * -5.5);","        \t\t\t    \tcamera.position.z = (Math.random() * 60.0);","        \t\t\t    \tcamera.position.z -= 30.0;","               \t\t\t    \tcamera.rotation.z = (Math.random() * (Math.PI*2.0));","               \t\t\t    \tcamera.rotation.z -= Math.PI;","        \t\t\t    };","        \t\t\t    this.getLostComp = function(){","        \t\t\t    \tcamera.position.x = (Math.random() * -45.0);","        \t\t\t    \tcamera.position.y = (Math.random() * -5.5);","        \t\t\t    \tcamera.position.z = (Math.random() * 60.0);","        \t\t\t    \tcamera.position.z -= 30.0;","               \t\t\t    \tcamera.rotation.z = (Math.random() * (Math.PI*2.0));","               \t\t\t    \tcamera.rotation.z -= Math.PI;","        \t\t\t    };","        \t\t\t    this.getLostPract = function(){","        \t\t\t    \tcamera.position.x = (Math.random() * 45.0);","        \t\t\t    \tcamera.position.y = (Math.random() * -5.5);","        \t\t\t    \tcamera.position.z = (Math.random() * 60.0);","        \t\t\t    \tcamera.position.z -= 30.0;","","               \t\t\t    \tcamera.rotation.z = (Math.random() * (Math.PI*2.0));","               \t\t\t    \tcamera.rotation.z -= Math.PI;","        \t\t\t    };","        \t\t\t    this.randomVis = function(){","        \t\t\t    \tscene.fog.density = (Math.random() * .75);","        \t\t\t    \tscene2.fog.density = (Math.random() * .75);","        \t\t\t    \tscene.spotLight.intensity = (Math.random() * 5.0);","        \t\t\t    \tscene2.spotLight2.intensity = (Math.random() * 5.0);","        \t\t\t    };","        \t\t\t}","        \t\t//source: This code no longer appears to contain anything that belongs to http://www.smartjava.org/ltjs/chapter-09/02-selecting-objects.html","","        \t\t\t","        \t\t//source: This code no longer appears to contain anything that belongs to http://nuevil.com/index3.html","        \t\tvar gui = new dat.GUI({resizable : false});","        \t\tvar folder1 = gui.addFolder('fog');","        \t\tvar fogDensity = folder1.add(scene2.fog, 'density').min(0.00).max(0.75).step(0.01).listen();","        \t\tvar folder2 = gui.addFolder('behavior');","        \t\tvar rotSpeed = folder2.add(camControls2, 'lookSpeed').min(0.0).max(0.5).step(0.01).listen();","        \t\tvar movSpeed = folder2.add(camControls2, 'movementSpeed').min(0.0).max(5.0).step(0.01).listen();","        \t\tvar folder3 = gui.addFolder('position');","  \t\t\tvar posX = folder3.add( camera2.position, 'x' ).min(-50.00).max(50.00).step(0.01).listen();","  \t\t\tvar posY = folder3.add( camera2.position, 'y' ).min(-50.00).max(50.00).step(0.01).listen();","  \t\t\tvar posZ = folder3.add( camera2.position, 'z' ).min(-50.00).max(50.00).step(0.01).listen();","  \t\t\tvar folder4 = gui.addFolder('rotation');","  \t\t\tvar rotZ = folder4.add( camera.rotation, 'z' ).min(-5.00).max(5.00).step(0.01).listen();","  \t\t\tvar folder5 = gui.addFolder('confusion');","  \t\t\tvar rVis = gui.add(guivalues, 'randomVis');","  \t\t\tvar rPosHead = gui.add(guivalues, 'getLostBoth');","  \t\t\tvar rPosHeadComp = gui.add(guivalues, 'getLostComp');","  \t\t\tvar rPosHeadPract = gui.add(guivalues, 'getLostPract');","  \t\t\t//source: This code no longer appears to contain anything that belongs to http://nuevil.com/index3.html","","  \t\t\tposX.onChange( function(value){   camera2.position.x = value; camera.position.x = value;   } );","  \t\t\tposY.onChange( function(value){   camera2.position.y = value; camera.position.y = value;   } );","\t\t\tposZ.onChange( function(value){   camera2.position.z = value; camera.position.z = value;   } );","\t\t\trotZ.onChange( function(value){   camera.rotation.z = value; camera.rotation.z = value;   } );","\t\t\t//source:http://nuevil.com/index3.html","","\t\t\t//source: This code no longer appears to contain anything that belongs to Rudie Dirkx http://hotblocks.nl/tests/three/dat.gui.html ","\t\t\tfogDensity.onChange( function(value){   scene2.fog.density = value; scene.fog.density = value;   });","  \t\t\trotSpeed.onChange( function(value){   camControls2.lookSpeed = value; camControls.lookSpeed = value;   });","\t\t\tmovSpeed.onChange( function(value){   camControls2.movementSpeed = value; camControls.movementSpeed = value;  });","\t\t\tmovSpeed.onChange( function(value){   camControls2.movementSpeed = value; camControls.movementSpeed = value;  });","\t\t\tspotIntensity.onChange( function(value){   scene2.spotLight2.intensity = value; scene.spotLight.intensity = value;   });","\t\t\t//source: This code no longer appears to contain anything that belongs to Rudie Dirkx http://hotblocks.nl/tests/three/dat.gui.html ","","\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\""]},{"start":{"row":406,"column":0},"end":{"row":407,"column":0},"action":"remove","lines":["",""]},{"start":{"row":408,"column":3},"end":{"row":413,"column":4},"action":"remove","lines":["\t","","\t\t\t}","","\t\t\tfunction render() {","\t\t\t\t"]},{"start":{"row":408,"column":3},"end":{"row":413,"column":22},"action":"insert","lines":["}","\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"","","\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\"","\t\t\tfunction render() {","\t\t\t\tkeyboard.update();"]},{"start":{"row":421,"column":0},"end":{"row":425,"column":0},"action":"remove","lines":["\t\t\t\t//camera2.rotateY(Math.PI/-1);","\t\t\t\t//camera2.up = new THREE.Vector3(0,-1,0);","\t\t\t\t//camera2.lookAt(new THREE.Vector3(-1, -1, -1));","\t\t\t\t//camera2.rotation.y = Math.PI;",""]},{"start":{"row":425,"column":0},"end":{"row":426,"column":0},"action":"remove","lines":["",""]},{"start":{"row":426,"column":0},"end":{"row":433,"column":4},"action":"remove","lines":["\t\t\t\t","\t\t\t\t//scene.fog.density = controls.fogDensity;","\t\t\t\t//scene2.fog.density = controls.fogDensity;","\t\t\t\t","\t\t\t\trenderer.render( scene, camera ); //render everything else","\t\t\t\trenderer2.render( scene2, camera2 );","","\t\t\t}"]},{"start":{"row":426,"column":0},"end":{"row":456,"column":105},"action":"insert","lines":["","\t\t\t\tif ( keyboard.pressed(\"shift\") )//almost positive this is original code","\t\t\t\t\tcamControls2.movementSpeed = camControls2.movementSpeed += 0.5;//note: it also doesn't work properly","\t\t\t\tif ( keyboard.pressed(\"ctrl\") )//almost positive this is original code","\t\t\t\t\tcamControls2.movementSpeed = camControls2.movementSpeed -= 0.5;","\t\t\t\tif ( keyboard.pressed(\"E\") ) {//pretty sure this is original code","\t\t\t\t\tcamera2.rotateY(Math.PI/-1);//original code","\t\t\t\t\tcamera2.rotateZ((Math.PI)/-1);//original code","\t\t\t\t}//this line is probably safe :P","\t\t\t\tif ( keyboard.pressed(\"J\") ) {guivalues.getLostBoth();}","\t\t\t\tif ( keyboard.pressed(\"K\") ) {guivalues.getLostComp();}","\t\t\t\tif ( keyboard.pressed(\"L\") ) {guivalues.getLostPract();}","\t\t\t\tif ( camera2.position.y >= -0.80) { //cheap hack to bypass the fog entangling impact of using a single .obj/.mtl file above and below water","\t\t\t\t\twhile(camera2.position.y >= -0.80){","\t\t\t\t\t\t//guivalues.fogLastValue = scene2.fog.density;","\t\t\t\t\t\t//guivalues.aboveWater = true;","\t\t\t\t\t\tscene2.fog.density = 0; ","\t\t\t\t\t\tscene.fog.density = 0;","\t\t\t\t\t\t}","\t\t\t\t\t}","\t\t\t\t/*\t","\t\t\t\tif (camera2.position.y < -0.80){\t// && guivalues.aboveWater) { //more cheap hack","\t\t\t\t\tscene2.fog.density = guivalues.fogLastValue; ","\t\t\t\t\tscene.fog.density = guivalues.fogLastValue;","\t\t\t\t\t//guivalues.aboveWater = false;","\t\t\t\t\t}","\t\t\t\t\t*/","\t\t\t\trenderer.render( scene, camera ); //render everything else","\t\t\t\trenderer2.render( scene2, camera2 ); //render everything else","\t\t\t}","\t\t\t//source: MIT License OR \"This code no longer appears to contain anything that belongs to josdirksen?\""]}],[{"start":{"row":275,"column":32},"end":{"row":275,"column":33},"action":"remove","lines":["5"],"id":3,"ignore":true},{"start":{"row":275,"column":32},"end":{"row":275,"column":33},"action":"insert","lines":["9"]},{"start":{"row":439,"column":5},"end":{"row":439,"column":7},"action":"insert","lines":["//"]},{"start":{"row":444,"column":6},"end":{"row":445,"column":8},"action":"insert","lines":["//break;","\t\t\t\t\t\t//"]}],[{"start":{"row":41,"column":4},"end":{"row":41,"column":13},"action":"remove","lines":["left: 112"],"id":4,"ignore":true},{"start":{"row":41,"column":4},"end":{"row":41,"column":11},"action":"insert","lines":["right: "]},{"start":{"row":45,"column":0},"end":{"row":54,"column":0},"action":"insert","lines":["\t\t\t<!--.styling{","\t\t\t\tbackground-color:black;","\t\t\t\tcolor:lime;","\t\t\t\tfont: bold 16px MS Sans Serif;","\t\t\t\tpadding: 3px;","\t\t\t\tposition: fixed;","\t\t\t\tleft: 0px;","\t\t\t\ttop: 0px;","\t\t\t\t}-->",""]},{"start":{"row":86,"column":0},"end":{"row":157,"column":0},"action":"insert","lines":["\t\t","\t\t\t\t\t<span id=\"digitalclock\" class=\"styling\"></span>","","<script>","<!--","","//LCD Clock script- by javascriptkit.com","//Visit JavaScript Kit (http://javascriptkit.com) for script","//Credit must stay intact for use","","var alternate=0","var standardbrowser=!document.all&&!document.getElementById","","if (standardbrowser)","document.write('<form name=\"tick\"><input type=\"text\" name=\"tock\" size=\"11\"></form>')","","function show(){","if (!standardbrowser)","var clockobj=document.getElementById? document.getElementById(\"digitalclock\") : document.all.digitalclock","//var Digital=new Date(\"July 28, 2014 11:13:00\")","var RealTime=new Date()","var year=14","var month=7","var day=28","var hours=RealTime.getHours()","//var hours=Digital.getHours()","//var hoursReal=RealTime.getHours()","var minutes=RealTime.getMinutes()","//var minutes=Digital.getMinutes()","//var minutesReal=RealTime.getMinutes()","var seconds=RealTime.getSeconds()","var dn=\"AM\"","","if (hours==12) dn=\"PM\" ","if (hours>12){","dn=\"PM\"","//hours=hours-12","}","","if (hours==0) hours=12","if (hours.toString().length==1)","hours=\"0\"+hours","if (minutes<=9)","minutes=\"0\"+minutes","if (seconds<=9)","seconds=\"0\"+seconds","if (standardbrowser){","if (alternate==0)","document.tick.tock.value=hours+\" : \"+minutes+\" \"+dn","else","document.tick.tock.value=hours+\"   \"+minutes+\" \"+dn","}","else{","if (alternate==0)","clockobj.innerHTML=month+\" / \"+day+\" / \"+year+\"   \"+hours+\" : \"+minutes+\" : \"+seconds+\" \"+\"<sup style='font-size:70%'>\"+dn+\"</sup>\"","else","clockobj.innerHTML=month+\" / \"+day+\" / \"+year+\"   \"+hours+\" : \"+minutes+\" : \"+seconds+\" \"+\"<sup style='font-size:70%'>\"+dn+\"</sup>\"","}","alternate=(alternate==0)? 1 : 0","setTimeout(\"show()\",1000)","}","window.onload=show","","//-->","/*","<p>This free script provided by<br/>","<a href=\"http://javascriptkit.com\">JavaScript","Kit</a></p>","*/","</script>","",""]},{"start":{"row":240,"column":4},"end":{"row":246,"column":51},"action":"remove","lines":["//scene.fog = new THREE.FogExp2( 0x008080, 0.1875 );","\t\t\t\t","\t\t\t\t//scene.fog = new THREE.FogExp2( 0x008080, 0.1375 );","\t\t\t\tscene.fog = new THREE.FogExp2( 0x008080, 0.1875 );","\t\t\t\tscene2.fog = new THREE.FogExp2( 0x008080, 0.1875 );","\t\t\t\t//scene.fog = new THREE.FogExp2( 0x008080, 0.05 );","\t\t\t\t//scene2.fog = new THREE.FogExp2( 0x008080, 0.0"]},{"start":{"row":240,"column":4},"end":{"row":241,"column":51},"action":"insert","lines":["scene.fog = new THREE.FogExp2( 0x008080, 0.1875 );","\t\t\t\tscene2.fog = new THREE.FogExp2( 0x008080, 0.187"]},{"start":{"row":246,"column":0},"end":{"row":246,"column":8},"action":"remove","lines":["        "]},{"start":{"row":246,"column":0},"end":{"row":246,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":254,"column":0},"end":{"row":254,"column":8},"action":"remove","lines":["        "]},{"start":{"row":254,"column":0},"end":{"row":254,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":258,"column":0},"end":{"row":259,"column":8},"action":"remove","lines":["        \t\t\t","        "]},{"start":{"row":258,"column":0},"end":{"row":259,"column":1},"action":"insert","lines":["\t\t\t\t","\t"]},{"start":{"row":260,"column":0},"end":{"row":260,"column":8},"action":"remove","lines":["        "]},{"start":{"row":260,"column":0},"end":{"row":260,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":261,"column":0},"end":{"row":261,"column":8},"action":"remove","lines":["        "]},{"start":{"row":261,"column":0},"end":{"row":261,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":262,"column":0},"end":{"row":262,"column":8},"action":"remove","lines":["        "]},{"start":{"row":262,"column":0},"end":{"row":262,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":263,"column":0},"end":{"row":263,"column":8},"action":"remove","lines":["        "]},{"start":{"row":263,"column":0},"end":{"row":263,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":264,"column":0},"end":{"row":265,"column":8},"action":"remove","lines":["        \t\t\t","        "]},{"start":{"row":264,"column":0},"end":{"row":265,"column":1},"action":"insert","lines":["\t\t\t\t","\t"]},{"start":{"row":266,"column":0},"end":{"row":266,"column":8},"action":"remove","lines":["        "]},{"start":{"row":266,"column":0},"end":{"row":266,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":267,"column":0},"end":{"row":267,"column":8},"action":"remove","lines":["        "]},{"start":{"row":267,"column":0},"end":{"row":267,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":268,"column":0},"end":{"row":268,"column":8},"action":"remove","lines":["        "]},{"start":{"row":268,"column":0},"end":{"row":268,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":269,"column":0},"end":{"row":269,"column":8},"action":"remove","lines":["        "]},{"start":{"row":269,"column":0},"end":{"row":269,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":270,"column":0},"end":{"row":271,"column":8},"action":"remove","lines":["        \t\t\t","        "]},{"start":{"row":270,"column":0},"end":{"row":271,"column":1},"action":"insert","lines":["\t\t\t\t","\t"]},{"start":{"row":275,"column":4},"end":{"row":275,"column":6},"action":"insert","lines":["//"]},{"start":{"row":279,"column":4},"end":{"row":279,"column":6},"action":"insert","lines":["//"]},{"start":{"row":280,"column":4},"end":{"row":288,"column":6},"action":"insert","lines":["/*","\t\t\t\t//var directionalLight = new THREE.DirectionalLight( 0xffffff, 1 );","\t\t\t\t//directionalLight.position.set( 0, -1, 0 );","\t\t\t\t//scene.add( directionalLight );","\t\t\t\t","\t\t\t\t//var directionalLight2 = new THREE.DirectionalLight( 0xffffff, 1 );","\t\t\t\t//directionalLight2.position.set( 0, 1, 0 );","\t\t\t\t//scene.add( directionalLight2 );","\t\t\t\t*/"]},{"start":{"row":290,"column":48},"end":{"row":291,"column":8},"action":"remove","lines":["383838);","        "]},{"start":{"row":290,"column":48},"end":{"row":291,"column":1},"action":"insert","lines":["ffffff);","\t"]},{"start":{"row":291,"column":4},"end":{"row":291,"column":6},"action":"insert","lines":["//"]},{"start":{"row":292,"column":0},"end":{"row":293,"column":8},"action":"remove","lines":["        \t\t\t","        "]},{"start":{"row":292,"column":0},"end":{"row":293,"column":1},"action":"insert","lines":["\t\t\t\t","\t"]},{"start":{"row":294,"column":4},"end":{"row":294,"column":6},"action":"insert","lines":["//"]},{"start":{"row":296,"column":0},"end":{"row":297,"column":15},"action":"remove","lines":["        \t\t\t// add spotlight for the shadows","        \t\t\tvar "]},{"start":{"row":296,"column":0},"end":{"row":314,"column":4},"action":"insert","lines":["\t\t\t\t//light up the sun","\t\t\t\t//spotLightSUN = new THREE.SpotLight(0xFFFFFF);","\t\t\t\t//spotLightSUN.position.set(100, 140, -130);","\t\t\t\t//spotLightSUN.intensity = 1000;","\t\t\t\t//scene.add(spotLightSUN);","\t\t\t\t","\t\t\t\t","\t\t\t\t//Add the three spotlights representing the sun(intensity will be modified as a function of depth)","\t\t\t\tspotLightRED = new THREE.SpotLight(0xff0000);","\t\t\t\tspotLightRED.position.set(100, 140, -130);","\t\t\t\tspotLightRED.intensity = 2;","\t\t\t\tscene.add(spotLightRED);","\t\t\t\t","\t\t\t\tspotLightRED2 = new THREE.SpotLight(0xff0000);","\t\t\t\tspotLightRED2.position.set(100, 140, -130);","\t\t\t\tspotLightRED2.intensity = .75;","\t\t\t\tscene2.add(spotLightRED2);","\t\t\t\t","\t\t\t\t"]},{"start":{"row":314,"column":13},"end":{"row":314,"column":17},"action":"insert","lines":["BLUE"]},{"start":{"row":314,"column":42},"end":{"row":314,"column":46},"action":"remove","lines":["ffff"]},{"start":{"row":314,"column":42},"end":{"row":314,"column":46},"action":"insert","lines":["00a9"]},{"start":{"row":315,"column":0},"end":{"row":315,"column":8},"action":"remove","lines":["        "]},{"start":{"row":315,"column":0},"end":{"row":320,"column":1},"action":"insert","lines":["\t\t\t\tspotLightBLUE.position.set(100, 140, -130);","\t\t\t\tspotLightBLUE.intensity = .75;","\t\t\t\tscene.add(spotLightBLUE);","\t\t\t\t","\t\t\t\tspotLightBLUE2 = new THREE.SpotLight(0x00a9ff);","\t"]},{"start":{"row":320,"column":13},"end":{"row":320,"column":18},"action":"insert","lines":["BLUE2"]},{"start":{"row":320,"column":42},"end":{"row":320,"column":43},"action":"insert","lines":["-"]},{"start":{"row":321,"column":0},"end":{"row":321,"column":8},"action":"remove","lines":["        "]},{"start":{"row":321,"column":0},"end":{"row":326,"column":1},"action":"insert","lines":["\t\t\t\tspotLightBLUE2.intensity = .75;","\t\t\t\tscene2.add(spotLightBLUE2);","\t\t\t\t","\t\t\t\tspotLightGREEN = new THREE.SpotLight(0x5eff00);","\t\t\t\tspotLightGREEN.position.set(100, 140, -130);","\t"]},{"start":{"row":326,"column":13},"end":{"row":326,"column":18},"action":"insert","lines":["GREEN"]},{"start":{"row":326,"column":31},"end":{"row":327,"column":8},"action":"remove","lines":["2;","        "]},{"start":{"row":326,"column":31},"end":{"row":332,"column":0},"action":"insert","lines":[".75;","\t\t\t\tscene.add(spotLightGREEN);","\t\t\t\t","\t\t\t\tspotLightGREEN2 = new THREE.SpotLight(0x5eff00);","\t\t\t\tspotLightGREEN2.position.set(100, 140, -130);","\t\t\t\tspotLightGREEN2.intensity = .75;",""]},{"start":{"row":332,"column":3},"end":{"row":332,"column":4},"action":"insert","lines":["\t"]},{"start":{"row":332,"column":9},"end":{"row":332,"column":10},"action":"insert","lines":["2"]},{"start":{"row":332,"column":24},"end":{"row":334,"column":8},"action":"remove","lines":[");","        \t\t\t","        "]},{"start":{"row":332,"column":24},"end":{"row":339,"column":1},"action":"insert","lines":["GREEN2);","\t\t\t\t//Add the three spotlights representing the sun(intensity will be modified as a function of depth)","","","\t\t\t\t","\t\t\t\t// add spotlight for the shadows","\t\t\t\t/*","\t"]},{"start":{"row":339,"column":17},"end":{"row":339,"column":18},"action":"remove","lines":["2"]},{"start":{"row":340,"column":0},"end":{"row":340,"column":8},"action":"remove","lines":["        "]},{"start":{"row":340,"column":0},"end":{"row":345,"column":1},"action":"insert","lines":["\t\t\t\tspotLight.position.set(100, 140, 130);","\t\t\t\tspotLight.intensity = 2;","\t\t\t\tscene.add(spotLight);","\t\t\t\t","\t\t\t\tvar spotLight2 = new THREE.SpotLight(0xffffff);","\t"]},{"start":{"row":346,"column":0},"end":{"row":346,"column":8},"action":"remove","lines":["        "]},{"start":{"row":346,"column":0},"end":{"row":346,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":347,"column":0},"end":{"row":347,"column":8},"action":"remove","lines":["        "]},{"start":{"row":347,"column":0},"end":{"row":347,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":348,"column":0},"end":{"row":349,"column":0},"action":"insert","lines":["\t\t\t\t*/",""]},{"start":{"row":358,"column":0},"end":{"row":358,"column":8},"action":"remove","lines":["        "]},{"start":{"row":358,"column":0},"end":{"row":358,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":366,"column":0},"end":{"row":366,"column":8},"action":"remove","lines":["        "]},{"start":{"row":366,"column":0},"end":{"row":366,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":401,"column":29},"end":{"row":401,"column":33},"action":"remove","lines":["0.89"]},{"start":{"row":401,"column":29},"end":{"row":401,"column":32},"action":"insert","lines":[".95"]},{"start":{"row":402,"column":30},"end":{"row":402,"column":31},"action":"remove","lines":["0"]},{"start":{"row":402,"column":32},"end":{"row":402,"column":33},"action":"insert","lines":["5"]},{"start":{"row":452,"column":0},"end":{"row":477,"column":0},"action":"insert","lines":["\t\t\t\t","\t\t\t\tvar geometry = new THREE.IcosahedronGeometry( 30, 4 );","\t\t\t\tfor ( var i = 0, j = geometry.faces.length; i < j; i ++ ) {","\t\t\t\t\tgeometry.faces[ i ].color.setHex( 0xffffff );","\t\t\t\t}","\t\t\t\tvar material = new THREE.MeshPhongMaterial( {","\t\t\t\t\tvertexColors: THREE.FaceColors,","\t\t\t\t\tshininess: 100000,","\t\t\t\t\tenvMap: cubeMap","\t\t\t\t} );","\t\t\t\tsphere = new THREE.Mesh( geometry, material );","\t\t\t\tscene.add( sphere );","\t\t\t\t","\t\t\t\tvar geometry2 = new THREE.IcosahedronGeometry( 10, 4 );","\t\t\t\tfor ( var i = 0, j = geometry.faces.length; i < j; i ++ ) {","\t\t\t\t\tgeometry.faces[ i ].color.setHex( 0xffff00 );","\t\t\t\t}","\t\t\t\tvar material2 = new THREE.MeshPhongMaterial( {","\t\t\t\t\tvertexColors: THREE.FaceColors,","\t\t\t\t\tshininess: 100,","\t\t\t\t\tenvMap: cubeMap","\t\t\t\t} );","\t\t\t\tsphere2 = new THREE.Mesh( geometry2, material2 );","\t\t\t\t//scene.add( sphere2 );","\t\t\t\t",""]},{"start":{"row":481,"column":0},"end":{"row":481,"column":8},"action":"remove","lines":["        "]},{"start":{"row":481,"column":0},"end":{"row":481,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":483,"column":4},"end":{"row":485,"column":8},"action":"remove","lines":["    this.fogLastValue = 0;","\t\t\t\t    this.aboveWater = false;","        "]},{"start":{"row":483,"column":4},"end":{"row":485,"column":1},"action":"insert","lines":["\t","\t\t\t\t    this.timeShift = 0;","\t"]},{"start":{"row":486,"column":0},"end":{"row":486,"column":8},"action":"remove","lines":["        "]},{"start":{"row":486,"column":0},"end":{"row":486,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":487,"column":0},"end":{"row":487,"column":8},"action":"remove","lines":["        "]},{"start":{"row":487,"column":0},"end":{"row":487,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":488,"column":0},"end":{"row":488,"column":8},"action":"remove","lines":["        "]},{"start":{"row":488,"column":0},"end":{"row":488,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":489,"column":0},"end":{"row":489,"column":8},"action":"remove","lines":["        "]},{"start":{"row":489,"column":0},"end":{"row":489,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":490,"column":0},"end":{"row":490,"column":8},"action":"remove","lines":["        "]},{"start":{"row":490,"column":0},"end":{"row":490,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":491,"column":7},"end":{"row":491,"column":15},"action":"remove","lines":["        "]},{"start":{"row":491,"column":7},"end":{"row":491,"column":8},"action":"insert","lines":["\t"]},{"start":{"row":492,"column":7},"end":{"row":492,"column":15},"action":"remove","lines":["        "]},{"start":{"row":492,"column":7},"end":{"row":492,"column":8},"action":"insert","lines":["\t"]},{"start":{"row":493,"column":0},"end":{"row":493,"column":8},"action":"remove","lines":["        "]},{"start":{"row":493,"column":0},"end":{"row":493,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":494,"column":0},"end":{"row":494,"column":8},"action":"remove","lines":["        "]},{"start":{"row":494,"column":0},"end":{"row":494,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":495,"column":0},"end":{"row":495,"column":8},"action":"remove","lines":["        "]},{"start":{"row":495,"column":0},"end":{"row":495,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":496,"column":0},"end":{"row":496,"column":8},"action":"remove","lines":["        "]},{"start":{"row":496,"column":0},"end":{"row":496,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":497,"column":0},"end":{"row":497,"column":8},"action":"remove","lines":["        "]},{"start":{"row":497,"column":0},"end":{"row":497,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":498,"column":0},"end":{"row":498,"column":8},"action":"remove","lines":["        "]},{"start":{"row":498,"column":0},"end":{"row":498,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":499,"column":0},"end":{"row":499,"column":8},"action":"remove","lines":["        "]},{"start":{"row":499,"column":10},"end":{"row":499,"column":11},"action":"insert","lines":["\t"]},{"start":{"row":500,"column":7},"end":{"row":500,"column":15},"action":"remove","lines":["        "]},{"start":{"row":500,"column":7},"end":{"row":500,"column":8},"action":"insert","lines":["\t"]},{"start":{"row":501,"column":0},"end":{"row":501,"column":8},"action":"remove","lines":["        "]},{"start":{"row":501,"column":0},"end":{"row":501,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":502,"column":0},"end":{"row":502,"column":8},"action":"remove","lines":["        "]},{"start":{"row":502,"column":0},"end":{"row":502,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":503,"column":0},"end":{"row":503,"column":8},"action":"remove","lines":["        "]},{"start":{"row":503,"column":0},"end":{"row":503,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":504,"column":0},"end":{"row":504,"column":8},"action":"remove","lines":["        "]},{"start":{"row":504,"column":0},"end":{"row":504,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":505,"column":0},"end":{"row":505,"column":8},"action":"remove","lines":["        "]},{"start":{"row":505,"column":0},"end":{"row":505,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":506,"column":0},"end":{"row":506,"column":8},"action":"remove","lines":["        "]},{"start":{"row":506,"column":0},"end":{"row":506,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":508,"column":7},"end":{"row":508,"column":15},"action":"remove","lines":["        "]},{"start":{"row":508,"column":7},"end":{"row":508,"column":8},"action":"insert","lines":["\t"]},{"start":{"row":509,"column":7},"end":{"row":509,"column":15},"action":"remove","lines":["        "]},{"start":{"row":509,"column":7},"end":{"row":509,"column":8},"action":"insert","lines":["\t"]},{"start":{"row":510,"column":0},"end":{"row":513,"column":28},"action":"remove","lines":["        \t\t\t    };","        \t\t\t    this.randomVis = function(){","        \t\t\t    \tscene.fog.density = (Math.random() * .75);","        \t\t\t    \tscene2.fog.d"]},{"start":{"row":510,"column":0},"end":{"row":532,"column":30},"action":"insert","lines":["\t\t\t\t    };","\t\t\t\t    this.lightDepthFix = function(){","\t\t\t\t\tintensity = .85;","\t\t\t\t\tdepthcm = (camera2.position.y + (0.9)) * (-100.0);","\t\t\t\t\tadjIntensityRED = (intensity * (Math.exp(-.006 * depthcm)));","\t\t\t\t\tadjIntensityGREEN = (intensity * (Math.exp(-.00032 * depthcm)));","\t\t\t\t\tadjIntensityBLUE = (intensity * (Math.exp(-.000247 * depthcm)));","\t\t\t\t\tspotLightRED.intensity = adjIntensityRED;","\t\t\t\t\tspotLightRED2.intensity = adjIntensityRED;","\t\t\t\t\tspotLightGREEN.intensity = adjIntensityGREEN;","\t\t\t\t\tspotLightGREEN2.intensity = adjIntensityGREEN;","\t\t\t\t\tspotLightBLUE.intensity = adjIntensityBLUE;","\t\t\t\t\tspotLightBLUE2.intensity = adjIntensityBLUE;","\t\t\t\t    };","\t\t\t\t    this.normalLight = function(){","\t\t\t\t\tvar nintensity = 0.85;","\t\t\t\t\tspotLightRED.intensity = nintensity;","\t\t\t\t\tspotLightRED2.intensity = nintensity;","\t\t\t\t\tspotLightGREEN.intensity = nintensity;","\t\t\t\t\tspotLightGREEN2.intensity = nintensity;","\t\t\t\t\tspotLightBLUE.intensity = nintensity;","\t\t\t\t\tspotLightBLUE2.intensity = nintensity;","\t\t\t\t    \t//scene.spotLight.int"]},{"start":{"row":532,"column":56},"end":{"row":533,"column":8},"action":"remove","lines":[".75);","        "]},{"start":{"row":532,"column":56},"end":{"row":533,"column":1},"action":"insert","lines":["5.0);","\t"]},{"start":{"row":533,"column":9},"end":{"row":533,"column":11},"action":"insert","lines":["//"]},{"start":{"row":533,"column":16},"end":{"row":533,"column":17},"action":"insert","lines":["2"]},{"start":{"row":533,"column":27},"end":{"row":533,"column":28},"action":"insert","lines":["2"]},{"start":{"row":534,"column":0},"end":{"row":534,"column":8},"action":"remove","lines":["        "]},{"start":{"row":534,"column":0},"end":{"row":536,"column":0},"action":"insert","lines":["\t\t\t\t    };","\t\t\t\t    this.randomVis = function(){",""]},{"start":{"row":536,"column":3},"end":{"row":536,"column":4},"action":"insert","lines":["\t"]},{"start":{"row":536,"column":9},"end":{"row":539,"column":8},"action":"remove","lines":["scene2.spotLight2.intensity = (Math.random() * 5.0);","        \t\t\t    };","        \t\t\t}","        "]},{"start":{"row":536,"column":9},"end":{"row":551,"column":1},"action":"insert","lines":["fdensity = (Math.random() * .75);","\t\t\t\t\tscene.fog.density = fdensity;","\t\t\t\t\tscene2.fog.density = fdensity;","\t\t\t\t    \t","\t\t\t\t\trintensity = (Math.random() * 0.6667);","\t\t\t\t\t","\t\t\t\t\tspotLightRED.intensity = rintensity;","\t\t\t\t\tspotLightRED2.intensity = rintensity;","\t\t\t\t\tspotLightGREEN.intensity = rintensity;","\t\t\t\t\tspotLightGREEN2.intensity = rintensity;","\t\t\t\t\tspotLightBLUE.intensity = rintensity;","\t\t\t\t\tspotLightBLUE2.intensity = rintensity;","","\t\t\t\t    };","\t\t\t\t}","\t"]},{"start":{"row":553,"column":0},"end":{"row":554,"column":8},"action":"remove","lines":["        \t\t\t","        "]},{"start":{"row":553,"column":0},"end":{"row":554,"column":1},"action":"insert","lines":["\t\t\t\t","\t"]},{"start":{"row":555,"column":0},"end":{"row":555,"column":8},"action":"remove","lines":["        "]},{"start":{"row":555,"column":0},"end":{"row":555,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":556,"column":0},"end":{"row":556,"column":8},"action":"remove","lines":["        "]},{"start":{"row":556,"column":0},"end":{"row":556,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":556,"column":32},"end":{"row":557,"column":8},"action":"remove","lines":["fog');","        "]},{"start":{"row":556,"column":32},"end":{"row":557,"column":1},"action":"insert","lines":["visibility');","\t"]},{"start":{"row":558,"column":0},"end":{"row":558,"column":8},"action":"remove","lines":["        "]},{"start":{"row":558,"column":0},"end":{"row":560,"column":1},"action":"insert","lines":["\t\t\tvar lightIntensity = folder1.add(spotLightRED, 'intensity').min(0.00).max(2.0).step(0.01).listen();","\t\t\tvar timeOfDay = folder1.add(guivalues, 'timeShift').min(-6.0).max(6.0).step(0.01).listen();","\t"]},{"start":{"row":561,"column":0},"end":{"row":561,"column":8},"action":"remove","lines":["        "]},{"start":{"row":561,"column":0},"end":{"row":561,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":562,"column":0},"end":{"row":562,"column":8},"action":"remove","lines":["        "]},{"start":{"row":562,"column":0},"end":{"row":562,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":563,"column":0},"end":{"row":563,"column":8},"action":"remove","lines":["        "]},{"start":{"row":563,"column":0},"end":{"row":563,"column":1},"action":"insert","lines":["\t"]},{"start":{"row":586,"column":3},"end":{"row":586,"column":11},"action":"remove","lines":["movSpeed"]},{"start":{"row":586,"column":3},"end":{"row":586,"column":17},"action":"insert","lines":["lightIntensity"]},{"start":{"row":586,"column":47},"end":{"row":586,"column":108},"action":"remove","lines":["camControls2.movementSpeed = value; camControls.movementSpeed"]},{"start":{"row":586,"column":47},"end":{"row":586,"column":102},"action":"insert","lines":["spotLightRED2.intensity = value; spotLightRED.intensity"]},{"start":{"row":586,"column":113},"end":{"row":586,"column":114},"action":"insert","lines":[" "]},{"start":{"row":587,"column":3},"end":{"row":587,"column":15},"action":"remove","lines":["spotIntensit"]},{"start":{"row":587,"column":3},"end":{"row":587,"column":11},"action":"insert","lines":["timeOfDa"]},{"start":{"row":587,"column":42},"end":{"row":587,"column":104},"action":"remove","lines":["scene2.spotLight2.intensity = value; scene.spotLight.intensity"]},{"start":{"row":587,"column":42},"end":{"row":587,"column":61},"action":"insert","lines":["guivalues.timeShift"]},{"start":{"row":587,"column":70},"end":{"row":587,"column":72},"action":"remove","lines":["  "]},{"start":{"row":608,"column":4},"end":{"row":608,"column":43},"action":"insert","lines":["//if (1==1){guivalues.lightDepthFix();}"]},{"start":{"row":610,"column":0},"end":{"row":612,"column":0},"action":"insert","lines":["\t\t\t\tvar timeSolar = performance.now() * 0.000000003472 + 32470000 + 3 * 3600000; //Measure time for water","\t\t\t\t",""]},{"start":{"row":614,"column":0},"end":{"row":659,"column":5},"action":"insert","lines":["\t\t\t\t","\t\t\t\t","\t\t\t\t//source:https://github.com/dirkk0/threejs_daynight/blob/master/index.html","\t\t\t\tvar nsin = Math.sin(timeSolar);","\t\t\t\tvar ncos = Math.cos(timeSolar);","\t\t\t\t// set the sun","\t\t\t\tspotLightRED.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);","\t\t\t\tspotLightRED.lookAt (0,0,0);","\t\t\t\t//spotLightRED2.position.copy( spotLightRED );","\t\t\t\tspotLightRED2.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);","\t\t\t\tspotLightRED2.lookAt (0,0,0);","\t\t\t\t//spotLightGREEN.position.copy( spotLightRED );","\t\t\t\tspotLightGREEN.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);","\t\t\t\tspotLightGREEN.lookAt (0,0,0);","\t\t\t\t//spotLightGREEN2.position.copy( spotLightRED );","\t\t\t\tspotLightGREEN2.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);","\t\t\t\tspotLightGREEN2.lookAt (0,0,0);","\t\t\t\t//spotLightBLUE.position.copy( spotLightRED );","\t\t\t\tspotLightBLUE.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);","\t\t\t\tspotLightBLUE.lookAt (0,0,0);","\t\t\t\t//spotLightBLUE2.position.copy( spotLightRED );","\t\t\t\tspotLightBLUE2.position.set( -2000*ncos, 2000*nsin, 1500*ncos+1000);","\t\t\t\tspotLightBLUE2.lookAt (0,0,0);","\t\t\t\t//source:https://github.com/dirkk0/threejs_daynight/blob/master/index.html","\t\t\t\t//spotLightSUN.position.set( -1900*ncos, 1900*nsin, 1425*ncos+1000);","\t\t\t\t//spotLightSUN.lookAt ( spotLightRED.position );","","","\t\t\t\tsphere.position.copy( spotLightRED.position );","\t\t\t\t//sphere2.position.copy( spotLightSUN.position );","","\t\t\t\tvar lightFix = new function(){","\t\t\t\t\tthis.lightDepthFix = function(){","\t\t\t\t\tintensity = .95;","\t\t\t\t\tdepthcm = (camera2.position.y + (0.9)) * (-100.0);","\t\t\t\t\tadjIntensityRED = (intensity * (Math.exp(-.006 * depthcm)));","\t\t\t\t\tadjIntensityGREEN = (intensity * (Math.exp(-.00032 * depthcm)));","\t\t\t\t\tadjIntensityBLUE = (intensity * (Math.exp(-.000247 * depthcm)));","\t\t\t\t\tspotLightRED.intensity = adjIntensityRED;","\t\t\t\t\tspotLightRED2.intensity = adjIntensityRED;","\t\t\t\t\tspotLightGREEN.intensity = adjIntensityGREEN;","\t\t\t\t\tspotLightGREEN2.intensity = adjIntensityGREEN;","\t\t\t\t\tspotLightBLUE.intensity = adjIntensityBLUE;","\t\t\t\t\tspotLightBLUE2.intensity = adjIntensityBLUE;","\t\t\t\t    };","\t\t\t\t}"]},{"start":{"row":660,"column":36},"end":{"row":660,"column":37},"action":"insert","lines":["{"]},{"start":{"row":661,"column":34},"end":{"row":663,"column":5},"action":"insert","lines":["2.0;//note: it also doesn't work properly","\t\t\t\t\tcamControls2.lookSpeed = 0.15;//note: it also doesn't work properly","\t\t\t\t\t"]},{"start":{"row":663,"column":16},"end":{"row":663,"column":17},"action":"remove","lines":["2"]},{"start":{"row":663,"column":31},"end":{"row":663,"column":32},"action":"remove","lines":["+"]},{"start":{"row":663,"column":33},"end":{"row":663,"column":35},"action":"remove","lines":["0."]},{"start":{"row":663,"column":33},"end":{"row":664,"column":32},"action":"insert","lines":["2.0;//note: it also doesn't work properly","\t\t\t\t\tcamControls.lookSpeed = 0.1"]},{"start":{"row":665,"column":0},"end":{"row":666,"column":0},"action":"insert","lines":["\t\t\t\t\t}",""]},{"start":{"row":666,"column":35},"end":{"row":666,"column":36},"action":"insert","lines":["{"]},{"start":{"row":667,"column":34},"end":{"row":667,"column":62},"action":"remove","lines":["camControls2.movementSpeed -"]},{"start":{"row":667,"column":34},"end":{"row":670,"column":27},"action":"insert","lines":["0.25;//note: it also doesn't work properly","\t\t\t\t\tcamControls2.lookSpeed = 0.05;//note: it also doesn't work properly","\t\t\t\t\tcamControls.movementSpeed = 0.25;//note: it also doesn't work properly","\t\t\t\t\tcamControls.lookSpeed "]},{"start":{"row":670,"column":31},"end":{"row":670,"column":32},"action":"insert","lines":["0"]},{"start":{"row":670,"column":34},"end":{"row":671,"column":6},"action":"insert","lines":["//note: it also doesn't work properly","\t\t\t\t\t}"]},{"start":{"row":672,"column":32},"end":{"row":672,"column":33},"action":"remove","lines":[" "]},{"start":{"row":672,"column":35},"end":{"row":672,"column":45},"action":"remove","lines":["pretty sur"]},{"start":{"row":672,"column":35},"end":{"row":672,"column":49},"action":"insert","lines":["almost positiv"]},{"start":{"row":675,"column":4},"end":{"row":675,"column":5},"action":"insert","lines":["\t"]},{"start":{"row":679,"column":0},"end":{"row":689,"column":0},"action":"insert","lines":["\t\t\t\tif ( keyboard.pressed(\"P\") ) {lightFix.lightDepthFix();}","\t\t\t\tif ( keyboard.pressed(\"V\") ) {","\t\t\t\t\t//guivalues.lightDepthFix();","\t\t\t\t\tguivalues.randomVis();","\t\t\t\t}","\t\t\t\tlightFix.lightDepthFix();","\t\t\t\t//if ( true ) {","\t\t\t\t\t//guivalues.lightDepthFix();","","\t\t\t\t//}",""]},{"start":{"row":689,"column":29},"end":{"row":689,"column":30},"action":"remove","lines":["="]},{"start":{"row":690,"column":5},"end":{"row":690,"column":30},"action":"remove","lines":["//while(camera2.position."]},{"start":{"row":690,"column":5},"end":{"row":691,"column":22},"action":"insert","lines":["\tscene2.fog.density = 0.0; ","\t\t\t\t\t\tscene.fog.densit"]},{"start":{"row":691,"column":24},"end":{"row":691,"column":25},"action":"remove","lines":[">"]},{"start":{"row":691,"column":26},"end":{"row":691,"column":27},"action":"remove","lines":["-"]},{"start":{"row":691,"column":28},"end":{"row":691,"column":32},"action":"remove","lines":["80){"]},{"start":{"row":691,"column":28},"end":{"row":691,"column":30},"action":"insert","lines":["0;"]},{"start":{"row":692,"column":6},"end":{"row":692,"column":8},"action":"remove","lines":["//"]},{"start":{"row":692,"column":16},"end":{"row":693,"column":36},"action":"remove","lines":["fogLastValue = scene2.fog.density;","\t\t\t\t\t\t//guivalues.aboveWater = true;"]},{"start":{"row":692,"column":16},"end":{"row":694,"column":170},"action":"insert","lines":["normalLight();","\t\t\t\t\t}","\t\t\t\tif ( camera2.position.y < -0.81 && camera2.position.y > -.9) { //cheap hack to bypass the fog entangling impact of using a single .obj/.mtl file above and below water"]},{"start":{"row":695,"column":28},"end":{"row":695,"column":33},"action":"insert","lines":[".1875"]},{"start":{"row":696,"column":27},"end":{"row":696,"column":32},"action":"insert","lines":[".1875"]},{"start":{"row":697,"column":5},"end":{"row":700,"column":6},"action":"remove","lines":["\t//break;","\t\t\t\t\t\t//}","\t\t\t\t\t}","\t\t\t\t/*"]},{"start":{"row":697,"column":5},"end":{"row":698,"column":4},"action":"insert","lines":["}","\t\t\t\t"]},{"start":{"row":699,"column":8},"end":{"row":699,"column":9},"action":"insert","lines":[" "]},{"start":{"row":699,"column":31},"end":{"row":699,"column":64},"action":"remove","lines":["0.80){\t// && guivalues.aboveWater"]},{"start":{"row":699,"column":31},"end":{"row":699,"column":35},"action":"insert","lines":["5.5 "]},{"start":{"row":699,"column":41},"end":{"row":699,"column":46},"action":"remove","lines":["more "]},{"start":{"row":699,"column":51},"end":{"row":700,"column":48},"action":"remove","lines":["","\t\t\t\t\tscene2.fog.density = guivalues.fogLastValue"]},{"start":{"row":699,"column":51},"end":{"row":700,"column":31},"action":"insert","lines":[" to bound behavior","\t\t\t\t\t\tcamera2.position.y = -5.5"]},{"start":{"row":701,"column":5},"end":{"row":701,"column":6},"action":"insert","lines":["\t"]},{"start":{"row":701,"column":6},"end":{"row":702,"column":36},"action":"remove","lines":["scene.fog.density = guivalues.fogLastValue;","\t\t\t\t\t//guivalues.aboveWater = false;"]},{"start":{"row":701,"column":6},"end":{"row":705,"column":31},"action":"insert","lines":["camera.position.y = -5.5; ","\t\t\t\t\t}","\t\t\t\tif ( camera2.position.y > 5.5 ) { //cheap hack to bound behavior","\t\t\t\t\t\tcamera2.position.y = 5.5; ","\t\t\t\t\t\tcamera.position.y = 5.5; "]},{"start":{"row":707,"column":0},"end":{"row":707,"column":1},"action":"remove","lines":["\t"]},{"start":{"row":707,"column":0},"end":{"row":708,"column":0},"action":"insert","lines":["",""]},{"start":{"row":708,"column":4},"end":{"row":708,"column":6},"action":"remove","lines":["*/"]}],[{"start":{"row":177,"column":70},"end":{"row":177,"column":71},"action":"insert","lines":["g"],"id":5}],[{"start":{"row":177,"column":71},"end":{"row":177,"column":72},"action":"insert","lines":["i"],"id":6}]]},"ace":{"folds":[],"scrolltop":2057.5,"scrollleft":0,"selection":{"start":{"row":187,"column":2},"end":{"row":187,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":145,"state":"js-no_regex","mode":"ace/mode/html"}},"timestamp":1434920527000}