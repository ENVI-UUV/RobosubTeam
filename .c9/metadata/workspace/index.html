{"changed":true,"filter":false,"title":"index.html","tooltip":"/index.html","value":"\n<!DOCTYPE html>\n<html lang=\"en\">\n\t<head>\n\t\t<title>three.js webgl - loaders - OBJ loader</title>\n\t\t<meta charset=\"utf-8\">\n\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">\n\t\t<style>\n\t\t\n\t\tbody {\n\t\t\t\tcolor: #61443e;\n\t\t\t\tfont-family:Monospace;\n\t\t\t\tfont-size:13px;\n\t\t\t\ttext-align:center;\n\n\t\t\t\tbackground-color: #efd1b5;\n\t\t\t\tmargin: 0px;\n\t\t\t\toverflow: hidden;\n\t\t\t}\n\n\t\t\t#info {\n\t\t\t\tposition: absolute;\n\t\t\t\ttop: 0px; width: 100%;\n\t\t\t\tpadding: 5px;\n\t\t\t}\n\n\t\t\ta {\n\n\t\t\t\tcolor: #a06851;\n\t\t\t}\n\t\t\n\t\t</style>\n\t</head>\n\n\t<body>\n\t\t<div id=\"info\">\n\t\t<a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - OBJLoader test\n\t\t</div>\n\n\t\t<script src=\"js/three.min.js\"></script>\n\t\t<script src=\"js/loaders/OBJLoader.js\"></script>\n\t\t<script src=\"js/controls/FirstPersonControls.js\"></script>\n\n\t\t<script src=\"js/ImprovedNoise.js\"></script>\n\n\t\t<script src=\"js/Detector.js\"></script>\n\t\t<script src=\"js/libs/stats.min.js\"></script>\n\n\t\t<script>\n\n\t\t\t\n\n\t\t\t\n\n\n\t\t\tvar container, stats;\n\n\t\t\tvar camera, controls, scene, renderer;\n\n\t\t\tvar mesh, texture;\n\n\t\t\tvar worldWidth = 256, worldDepth = 256,\n\t\t\tworldHalfWidth = worldWidth / 2, worldHalfDepth = worldDepth / 2;\n\n\t\t\tvar clock = new THREE.Clock();\n\n\t\t\tinit();\n\t\t\tanimate();\n\n\n\t\t\tfunction init() {\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\tcontainer = document.getElementById( 'container' );\n\n\t\t\t\tcamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );\n\n\t\t\t\tcontrols = new THREE.FirstPersonControls( camera );\n\t\t\t\tcontrols.movementSpeed = 150;\n\t\t\t\tcontrols.lookSpeed = 0.1;\n\n\t\t\t\tscene = new THREE.Scene();\n\t\t\t\tscene.fog = new THREE.FogExp2( 0xefd1b5, 0.0025 );\n\n\t\t\t\tdata = generateHeight( worldWidth, worldDepth );\n\n\t\t\t\tcamera.position.y = data[ worldHalfWidth + worldHalfDepth * worldWidth ] * 10 + 500;\n\n\t\t\t\tvar geometry = new THREE.PlaneBufferGeometry( 7500, 7500, worldWidth - 1, worldDepth - 1 );\n\t\t\t\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );\n\n\t\t\t\tvar vertices = geometry.attributes.position.array;\n\n\t\t\t\tfor ( var i = 0, j = 0, l = vertices.length; i < l; i ++, j += 3 ) {\n\n\t\t\t\t\tvertices[ j + 1 ] = data[ i ] * 10;\n\n\t\t\t\t}\n\n\t\t\t\ttexture = new THREE.Texture( generateTexture( data, worldWidth, worldDepth ), THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping );\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\tmesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );\n\t\t\t\tscene.add( mesh );\n\n\t\t\t\trenderer = new THREE.WebGLRenderer();\n\t\t\t\trenderer.setClearColor( 0xefd1b5 );\n\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );\n\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t\t\t\tcontainer.innerHTML = \"\";\n\n\t\t\t\tcontainer.appendChild( renderer.domElement );\n\n\t\t\t\tstats = new Stats();\n\t\t\t\tstats.domElement.style.position = 'absolute';\n\t\t\t\tstats.domElement.style.top = '0px';\n\t\t\t\tcontainer.appendChild( stats.domElement );\n\n\n\t\t\t\t//\n\n\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\t\t\t\t\n\n\t\t\t\tvar manager = new THREE.LoadingManager();\n\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {\n\n\t\t\t\t\tconsole.log( item, loaded, total );\n\n\t\t\t\t};\n\n\t\t\t\tvar texture = new THREE.Texture();\n\n\t\t\t\tvar onProgress = function ( xhr ) {\n\t\t\t\t\tif ( xhr.lengthComputable ) {\n\t\t\t\t\t\tvar percentComplete = xhr.loaded / xhr.total * 100;\n\t\t\t\t\t\tconsole.log( Math.round(percentComplete, 2) + '% downloaded' );\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tvar onError = function ( xhr ) {\n\t\t\t\t};\n\n\n\t\t\t\tvar loader = new THREE.ImageLoader( manager );\n\t\t\t\tloader.load( 'textures/UV_Grid_Sm.jpg', function ( image ) {\n\n\t\t\t\t\ttexture.image = image;\n\t\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\t} );\n\n\t\t\t\t// model\n\n\t\t\t\tvar loader = new THREE.OBJLoader( manager );\n\t\t\t\tloader.load( 'obj/transdec/transdec.obj', function ( object ) {\n\n\t\t\t\t\tobject.traverse( function ( child ) {\n\n\t\t\t\t\t\tif ( child instanceof THREE.Mesh ) {\n\n\t\t\t\t\t\t\tchild.material.map = texture;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} );\n\n\t\t\t\t\tobject.position.y = - 80;\n\t\t\t\t\tobject.scale.set(.025,.025,.025)\n\t\t\t\t\tscene.add( object );\n\n\t\t\t\t}, onProgress, onError );\n\n\t\t\t}\n\n\t\t\tfunction onWindowResize() {\n\n\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;\n\t\t\t\tcamera.updateProjectionMatrix();\n\n\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );\n\n\t\t\t\tcontrols.handleResize();\n\n\t\t\t}\n\t\t\t//\n\n\t\t\tfunction animate() {\n\n\t\t\t\trequestAnimationFrame( animate );\n\n\t\t\t\trender();\n\t\t\t\tstats.update();\n\n\t\t\t}\n\n\t\t\tfunction render() {\n\n                        \tcontrols.update( clock.getDelta() );\n\t\t\t\trenderer.render( scene, camera );\n\n\t\t\t}\n\n\t\t</script>\n\n\t</body>\n</html>\n","undoManager":{"mark":99,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":104,"column":33},"end":{"row":104,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":34},"end":{"row":104,"column":35},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":35},"end":{"row":104,"column":36},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":36},"end":{"row":104,"column":37},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":27},"end":{"row":104,"column":28},"action":"remove","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":26},"end":{"row":104,"column":27},"action":"remove","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":25},"end":{"row":104,"column":26},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":24},"end":{"row":104,"column":25},"action":"remove","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":23},"end":{"row":104,"column":24},"action":"remove","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":22},"end":{"row":104,"column":23},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":22},"end":{"row":104,"column":23},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":23},"end":{"row":104,"column":24},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":24},"end":{"row":104,"column":25},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":25},"end":{"row":104,"column":26},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":26},"end":{"row":104,"column":27},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":27},"end":{"row":104,"column":28},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":28},"end":{"row":104,"column":29},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":104,"column":29},"end":{"row":104,"column":30},"action":"insert","lines":["c"]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":6},"end":{"row":79,"column":0},"action":"insert","lines":["",""]},{"start":{"row":79,"column":0},"end":{"row":79,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":4},"end":{"row":80,"column":0},"action":"insert","lines":["",""]},{"start":{"row":80,"column":0},"end":{"row":80,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":4},"end":{"row":81,"column":0},"action":"insert","lines":["",""]},{"start":{"row":81,"column":0},"end":{"row":81,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":4},"end":{"row":82,"column":0},"action":"insert","lines":["",""]},{"start":{"row":82,"column":0},"end":{"row":82,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":4},"end":{"row":131,"column":24},"action":"insert","lines":["// load skybox","","\t\t\t\tvar cubeMap = new THREE.CubeTexture( [] );","\t\t\t\tcubeMap.format = THREE.RGBFormat;","\t\t\t\tcubeMap.flipY = false;","","\t\t\t\tvar loader = new THREE.ImageLoader();","\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","","\t\t\t\t\tvar getSide = function ( x, y ) {","","\t\t\t\t\t\tvar size = 1024;","","\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );","\t\t\t\t\t\tcanvas.width = size;","\t\t\t\t\t\tcanvas.height = size;","","\t\t\t\t\t\tvar context = canvas.getContext( '2d' );","\t\t\t\t\t\tcontext.drawImage( image, - x * size, - y * size );","","\t\t\t\t\t\treturn canvas;","","\t\t\t\t\t};","","\t\t\t\t\tcubeMap.images[ 0 ] = getSide( 2, 1 ); // px","\t\t\t\t\tcubeMap.images[ 1 ] = getSide( 0, 1 ); // nx","\t\t\t\t\tcubeMap.images[ 2 ] = getSide( 1, 0 ); // py","\t\t\t\t\tcubeMap.images[ 3 ] = getSide( 1, 2 ); // ny","\t\t\t\t\tcubeMap.images[ 4 ] = getSide( 1, 1 ); // pz","\t\t\t\t\tcubeMap.images[ 5 ] = getSide( 3, 1 ); // nz","\t\t\t\t\tcubeMap.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\tvar cubeShader = THREE.ShaderLib['cube'];","\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;","","\t\t\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {","\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,","\t\t\t\t\tvertexShader: cubeShader.vertexShader,","\t\t\t\t\tuniforms: cubeShader.uniforms,","\t\t\t\t\tdepthWrite: false,","\t\t\t\t\tside: THREE.BackSide","\t\t\t\t});","","\t\t\t\tvar skyBox = new THREE.Mesh(","\t\t\t\t\tnew THREE.BoxGeometry( 1000000, 1000000, 1000000 ),","\t\t\t\t\tskyBoxMaterial","\t\t\t\t);","\t\t\t\t","\t\t\t\tscene.add( skyBox );"]}]}],[{"group":"doc","deltas":[{"start":{"row":132,"column":4},"end":{"row":133,"column":0},"action":"insert","lines":["",""]},{"start":{"row":133,"column":0},"end":{"row":133,"column":4},"action":"insert","lines":["\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":4},"end":{"row":140,"column":6},"action":"insert","lines":["\t\t\t\t// texture","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":7},"end":{"row":133,"column":8},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":6},"end":{"row":133,"column":7},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":5},"end":{"row":133,"column":6},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":133,"column":4},"end":{"row":133,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":40},"end":{"row":156,"column":41},"action":"remove","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":39},"end":{"row":156,"column":40},"action":"remove","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":38},"end":{"row":156,"column":39},"action":"remove","lines":["j"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":37},"end":{"row":156,"column":38},"action":"remove","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":36},"end":{"row":156,"column":37},"action":"remove","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":35},"end":{"row":156,"column":36},"action":"remove","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":34},"end":{"row":156,"column":35},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":33},"end":{"row":156,"column":34},"action":"remove","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":32},"end":{"row":156,"column":33},"action":"remove","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":31},"end":{"row":156,"column":32},"action":"remove","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":30},"end":{"row":156,"column":31},"action":"remove","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":29},"end":{"row":156,"column":30},"action":"remove","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":28},"end":{"row":156,"column":29},"action":"remove","lines":["V"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":27},"end":{"row":156,"column":28},"action":"remove","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":27},"end":{"row":156,"column":28},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":28},"end":{"row":156,"column":29},"action":"insert","lines":["k"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":29},"end":{"row":156,"column":30},"action":"insert","lines":["y"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":30},"end":{"row":156,"column":31},"action":"insert","lines":["b"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":31},"end":{"row":156,"column":32},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":32},"end":{"row":156,"column":33},"action":"insert","lines":["x"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":33},"end":{"row":156,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":34},"end":{"row":156,"column":35},"action":"insert","lines":["u"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":35},"end":{"row":156,"column":36},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":36},"end":{"row":156,"column":37},"action":"insert","lines":["2"]},{"start":{"row":156,"column":37},"end":{"row":156,"column":38},"action":"insert","lines":["5"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":38},"end":{"row":156,"column":39},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":39},"end":{"row":156,"column":40},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":40},"end":{"row":156,"column":41},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":41},"end":{"row":156,"column":42},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":42},"end":{"row":156,"column":43},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":43},"end":{"row":156,"column":44},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":44},"end":{"row":156,"column":45},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":45},"end":{"row":156,"column":46},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":46},"end":{"row":156,"column":47},"action":"insert","lines":["p"]},{"start":{"row":156,"column":47},"end":{"row":156,"column":48},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":48},"end":{"row":156,"column":49},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":67},"end":{"row":167,"column":0},"action":"insert","lines":["",""]},{"start":{"row":167,"column":0},"end":{"row":167,"column":5},"action":"insert","lines":["\t\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":5},"end":{"row":168,"column":0},"action":"insert","lines":["loader.load( 'obj/transdec/transdec.obj', function ( object ) {",""]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":4},"end":{"row":167,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":4},"end":{"row":166,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":166,"column":5},"end":{"row":166,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":22},"end":{"row":167,"column":30},"action":"remove","lines":["transdec"]},{"start":{"row":167,"column":22},"end":{"row":167,"column":23},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":23},"end":{"row":167,"column":24},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":25},"end":{"row":167,"column":26},"action":"insert","lines":["0"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":26},"end":{"row":167,"column":27},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":28},"end":{"row":167,"column":36},"action":"remove","lines":["transdec"]},{"start":{"row":167,"column":28},"end":{"row":167,"column":29},"action":"insert","lines":["m"]},{"start":{"row":167,"column":29},"end":{"row":167,"column":30},"action":"insert","lines":["a"]},{"start":{"row":167,"column":30},"end":{"row":167,"column":31},"action":"insert","lines":["l"]},{"start":{"row":167,"column":31},"end":{"row":167,"column":32},"action":"insert","lines":["e"]},{"start":{"row":167,"column":32},"end":{"row":167,"column":33},"action":"insert","lines":["0"]},{"start":{"row":167,"column":33},"end":{"row":167,"column":34},"action":"insert","lines":["2"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":31},"end":{"row":167,"column":32},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":31},"end":{"row":167,"column":32},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"remove","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"remove","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":24},"end":{"row":167,"column":25},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":167,"column":25},"end":{"row":167,"column":26},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":72},"end":{"row":157,"column":0},"action":"insert","lines":["",""]},{"start":{"row":157,"column":0},"end":{"row":157,"column":5},"action":"insert","lines":["\t\t\t\t\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":5},"end":{"row":158,"column":0},"action":"insert","lines":["\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {",""]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":8},"end":{"row":157,"column":9},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":7},"end":{"row":157,"column":8},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":6},"end":{"row":157,"column":7},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":5},"end":{"row":157,"column":6},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":4},"end":{"row":157,"column":5},"action":"remove","lines":["\t"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":4},"end":{"row":156,"column":5},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":156,"column":5},"end":{"row":156,"column":6},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":27},"end":{"row":157,"column":49},"action":"remove","lines":["skyboxsun25degtest.png"]},{"start":{"row":157,"column":27},"end":{"row":157,"column":28},"action":"insert","lines":["U"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":28},"end":{"row":157,"column":29},"action":"insert","lines":["V"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":29},"end":{"row":157,"column":30},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":30},"end":{"row":157,"column":31},"action":"insert","lines":["G"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":31},"end":{"row":157,"column":32},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":32},"end":{"row":157,"column":33},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":33},"end":{"row":157,"column":34},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":34},"end":{"row":157,"column":35},"action":"insert","lines":["_"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":35},"end":{"row":157,"column":36},"action":"insert","lines":["S"]}]}],[{"group":"doc","deltas":[{"start":{"row":157,"column":36},"end":{"row":157,"column":37},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":244,"column":7},"action":"remove","lines":["","<!DOCTYPE html>","<html lang=\"en\">","\t<head>","\t\t<title>three.js webgl - loaders - OBJ loader</title>","\t\t<meta charset=\"utf-8\">","\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">","\t\t<style>","\t\t\tbody {","\t\t\t\tfont-family: Monospace;","\t\t\t\tbackground-color: #000;","\t\t\t\tcolor: #fff;","\t\t\t\tmargin: 0px;","\t\t\t\toverflow: hidden;","\t\t\t}","\t\t\t#info {","\t\t\t\tcolor: #fff;","\t\t\t\tposition: absolute;","\t\t\t\ttop: 10px;","\t\t\t\twidth: 100%;","\t\t\t\ttext-align: center;","\t\t\t\tz-index: 100;","\t\t\t\tdisplay:block;","\t\t\t}","\t\t\t#info a, .button { color: #f00; font-weight: bold; text-decoration: underline; cursor: pointer }","\t\t</style>","\t</head>","","\t<body>","\t\t<div id=\"info\">","\t\t<a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - OBJLoader test","\t\t</div>","","\t\t<script src=\"js/three.min.js\"></script>","\t\t<script src=\"js/loaders/OBJLoader.js\"></script>","","\t\t<script>","","\t\t\tvar container;","","\t\t\tvar camera, scene, renderer;","","\t\t\tvar mouseX = 0, mouseY = 0;","","\t\t\tvar windowHalfX = window.innerWidth / 2;","\t\t\tvar windowHalfY = window.innerHeight / 2;","","","\t\t\tinit();","\t\t\tanimate();","","","\t\t\tfunction init() {","","\t\t\t\tcontainer = document.createElement( 'div' );","\t\t\t\tdocument.body.appendChild( container );","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 45, window.innerWidth / window.innerHeight, 1, 2000 );","\t\t\t\tcamera.position.z = 100;","","\t\t\t\t// scene","","\t\t\t\tscene = new THREE.Scene();","","\t\t\t\tvar ambient = new THREE.AmbientLight( 0x101030 );","\t\t\t\tscene.add( ambient );","","\t\t\t\tvar directionalLight = new THREE.DirectionalLight( 0xffeedd );","\t\t\t\tdirectionalLight.position.set( 0, 0, 1 );","\t\t\t\tscene.add( directionalLight );","","\t\t\t\t// texture","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","\t\t\t\t","\t\t\t\t","\t\t\t\t// load skybox","","\t\t\t\tvar cubeMap = new THREE.CubeTexture( [] );","\t\t\t\tcubeMap.format = THREE.RGBFormat;","\t\t\t\tcubeMap.flipY = false;","","\t\t\t\tvar loader = new THREE.ImageLoader();","\t\t\t\tloader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","","\t\t\t\t\tvar getSide = function ( x, y ) {","","\t\t\t\t\t\tvar size = 1024;","","\t\t\t\t\t\tvar canvas = document.createElement( 'canvas' );","\t\t\t\t\t\tcanvas.width = size;","\t\t\t\t\t\tcanvas.height = size;","","\t\t\t\t\t\tvar context = canvas.getContext( '2d' );","\t\t\t\t\t\tcontext.drawImage( image, - x * size, - y * size );","","\t\t\t\t\t\treturn canvas;","","\t\t\t\t\t};","","\t\t\t\t\tcubeMap.images[ 0 ] = getSide( 2, 1 ); // px","\t\t\t\t\tcubeMap.images[ 1 ] = getSide( 0, 1 ); // nx","\t\t\t\t\tcubeMap.images[ 2 ] = getSide( 1, 0 ); // py","\t\t\t\t\tcubeMap.images[ 3 ] = getSide( 1, 2 ); // ny","\t\t\t\t\tcubeMap.images[ 4 ] = getSide( 1, 1 ); // pz","\t\t\t\t\tcubeMap.images[ 5 ] = getSide( 3, 1 ); // nz","\t\t\t\t\tcubeMap.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\tvar cubeShader = THREE.ShaderLib['cube'];","\t\t\t\tcubeShader.uniforms['tCube'].value = cubeMap;","","\t\t\t\tvar skyBoxMaterial = new THREE.ShaderMaterial( {","\t\t\t\t\tfragmentShader: cubeShader.fragmentShader,","\t\t\t\t\tvertexShader: cubeShader.vertexShader,","\t\t\t\t\tuniforms: cubeShader.uniforms,","\t\t\t\t\tdepthWrite: false,","\t\t\t\t\tside: THREE.BackSide","\t\t\t\t});","","\t\t\t\tvar skyBox = new THREE.Mesh(","\t\t\t\t\tnew THREE.BoxGeometry( 1000000, 1000000, 1000000 ),","\t\t\t\t\tskyBoxMaterial","\t\t\t\t);","\t\t\t\t","\t\t\t\tscene.add( skyBox );","\t\t\t\t","\t\t\t\t// texture","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","","\t\t\t\tvar texture = new THREE.Texture();","","\t\t\t\tvar onProgress = function ( xhr ) {","\t\t\t\t\tif ( xhr.lengthComputable ) {","\t\t\t\t\t\tvar percentComplete = xhr.loaded / xhr.total * 100;","\t\t\t\t\t\tconsole.log( Math.round(percentComplete, 2) + '% downloaded' );","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\tvar onError = function ( xhr ) {","\t\t\t\t};","","","\t\t\t\tvar loader = new THREE.ImageLoader( manager );","\t\t\t\t//loader.load( 'textures/skyboxsun25degtest.png', function ( image ) {","\t\t\t\tloader.load( 'textures/UV_Grid_Sm', function ( image ) {","","","\t\t\t\t\ttexture.image = image;","\t\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\t// model","","\t\t\t\tvar loader = new THREE.OBJLoader( manager );","\t\t\t\t//loader.load( 'obj/transdec/transdec.obj', function ( object ) {","\t\t\t\tloader.load( 'obj/male02/male02.obj', function ( object ) {","","","\t\t\t\t\tobject.traverse( function ( child ) {","","\t\t\t\t\t\tif ( child instanceof THREE.Mesh ) {","","\t\t\t\t\t\t\tchild.material.map = texture;","","\t\t\t\t\t\t}","","\t\t\t\t\t} );","","\t\t\t\t\tobject.position.y = - 80;","\t\t\t\t\tscene.add( object );","","\t\t\t\t}, onProgress, onError );","","\t\t\t\t//","","\t\t\t\trenderer = new THREE.WebGLRenderer();","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\tdocument.addEventListener( 'mousemove', onDocumentMouseMove, false );","","\t\t\t\t//","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\twindowHalfX = window.innerWidth / 2;","\t\t\t\twindowHalfY = window.innerHeight / 2;","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t}","","\t\t\tfunction onDocumentMouseMove( event ) {","","\t\t\t\tmouseX = ( event.clientX - windowHalfX ) / 2;","\t\t\t\tmouseY = ( event.clientY - windowHalfY ) / 2;","","\t\t\t}","","\t\t\t//","","\t\t\tfunction animate() {","","\t\t\t\trequestAnimationFrame( animate );","\t\t\t\trender();","","\t\t\t}","","\t\t\tfunction render() {","","\t\t\t\tcamera.position.x += ( mouseX - camera.position.x ) * .05;","\t\t\t\tcamera.position.y += ( - mouseY - camera.position.y ) * .05;","","\t\t\t\tcamera.lookAt( scene.position );","","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}","","\t\t</script>","","\t</body>","</html>"]},{"start":{"row":0,"column":0},"end":{"row":214,"column":0},"action":"insert","lines":["","<!DOCTYPE html>","<html lang=\"en\">","\t<head>","\t\t<title>three.js webgl - loaders - OBJ loader</title>","\t\t<meta charset=\"utf-8\">","\t\t<meta name=\"viewport\" content=\"width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0\">","\t\t<style>","\t\t","\t\tbody {","\t\t\t\tcolor: #61443e;","\t\t\t\tfont-family:Monospace;","\t\t\t\tfont-size:13px;","\t\t\t\ttext-align:center;","","\t\t\t\tbackground-color: #efd1b5;","\t\t\t\tmargin: 0px;","\t\t\t\toverflow: hidden;","\t\t\t}","","\t\t\t#info {","\t\t\t\tposition: absolute;","\t\t\t\ttop: 0px; width: 100%;","\t\t\t\tpadding: 5px;","\t\t\t}","","\t\t\ta {","","\t\t\t\tcolor: #a06851;","\t\t\t}","\t\t","\t\t</style>","\t</head>","","\t<body>","\t\t<div id=\"info\">","\t\t<a href=\"http://threejs.org\" target=\"_blank\">three.js</a> - OBJLoader test","\t\t</div>","","\t\t<script src=\"js/three.min.js\"></script>","\t\t<script src=\"js/loaders/OBJLoader.js\"></script>","\t\t<script src=\"js/controls/FirstPersonControls.js\"></script>","","\t\t<script src=\"js/ImprovedNoise.js\"></script>","","\t\t<script src=\"js/Detector.js\"></script>","\t\t<script src=\"js/libs/stats.min.js\"></script>","","\t\t<script>","","\t\t\t","","\t\t\t","","","\t\t\tvar container, stats;","","\t\t\tvar camera, controls, scene, renderer;","","\t\t\tvar mesh, texture;","","\t\t\tvar worldWidth = 256, worldDepth = 256,","\t\t\tworldHalfWidth = worldWidth / 2, worldHalfDepth = worldDepth / 2;","","\t\t\tvar clock = new THREE.Clock();","","\t\t\tinit();","\t\t\tanimate();","","","\t\t\tfunction init() {","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\tcontainer = document.getElementById( 'container' );","","\t\t\t\tcamera = new THREE.PerspectiveCamera( 60, window.innerWidth / window.innerHeight, 1, 10000 );","","\t\t\t\tcontrols = new THREE.FirstPersonControls( camera );","\t\t\t\tcontrols.movementSpeed = 150;","\t\t\t\tcontrols.lookSpeed = 0.1;","","\t\t\t\tscene = new THREE.Scene();","\t\t\t\tscene.fog = new THREE.FogExp2( 0xefd1b5, 0.0025 );","","\t\t\t\tdata = generateHeight( worldWidth, worldDepth );","","\t\t\t\tcamera.position.y = data[ worldHalfWidth + worldHalfDepth * worldWidth ] * 10 + 500;","","\t\t\t\tvar geometry = new THREE.PlaneBufferGeometry( 7500, 7500, worldWidth - 1, worldDepth - 1 );","\t\t\t\tgeometry.applyMatrix( new THREE.Matrix4().makeRotationX( - Math.PI / 2 ) );","","\t\t\t\tvar vertices = geometry.attributes.position.array;","","\t\t\t\tfor ( var i = 0, j = 0, l = vertices.length; i < l; i ++, j += 3 ) {","","\t\t\t\t\tvertices[ j + 1 ] = data[ i ] * 10;","","\t\t\t\t}","","\t\t\t\ttexture = new THREE.Texture( generateTexture( data, worldWidth, worldDepth ), THREE.UVMapping, THREE.ClampToEdgeWrapping, THREE.ClampToEdgeWrapping );","\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\tmesh = new THREE.Mesh( geometry, new THREE.MeshBasicMaterial( { map: texture } ) );","\t\t\t\tscene.add( mesh );","","\t\t\t\trenderer = new THREE.WebGLRenderer();","\t\t\t\trenderer.setClearColor( 0xefd1b5 );","\t\t\t\trenderer.setPixelRatio( window.devicePixelRatio );","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\tcontainer.innerHTML = \"\";","","\t\t\t\tcontainer.appendChild( renderer.domElement );","","\t\t\t\tstats = new Stats();","\t\t\t\tstats.domElement.style.position = 'absolute';","\t\t\t\tstats.domElement.style.top = '0px';","\t\t\t\tcontainer.appendChild( stats.domElement );","","","\t\t\t\t//","","\t\t\t\twindow.addEventListener( 'resize', onWindowResize, false );","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","\t\t\t\t","","\t\t\t\tvar manager = new THREE.LoadingManager();","\t\t\t\tmanager.onProgress = function ( item, loaded, total ) {","","\t\t\t\t\tconsole.log( item, loaded, total );","","\t\t\t\t};","","\t\t\t\tvar texture = new THREE.Texture();","","\t\t\t\tvar onProgress = function ( xhr ) {","\t\t\t\t\tif ( xhr.lengthComputable ) {","\t\t\t\t\t\tvar percentComplete = xhr.loaded / xhr.total * 100;","\t\t\t\t\t\tconsole.log( Math.round(percentComplete, 2) + '% downloaded' );","\t\t\t\t\t}","\t\t\t\t};","","\t\t\t\tvar onError = function ( xhr ) {","\t\t\t\t};","","","\t\t\t\tvar loader = new THREE.ImageLoader( manager );","\t\t\t\tloader.load( 'textures/UV_Grid_Sm.jpg', function ( image ) {","","\t\t\t\t\ttexture.image = image;","\t\t\t\t\ttexture.needsUpdate = true;","","\t\t\t\t} );","","\t\t\t\t// model","","\t\t\t\tvar loader = new THREE.OBJLoader( manager );","\t\t\t\tloader.load( 'obj/transdec/transdec.obj', function ( object ) {","","\t\t\t\t\tobject.traverse( function ( child ) {","","\t\t\t\t\t\tif ( child instanceof THREE.Mesh ) {","","\t\t\t\t\t\t\tchild.material.map = texture;","","\t\t\t\t\t\t}","","\t\t\t\t\t} );","","\t\t\t\t\tobject.position.y = - 80;","\t\t\t\t\tobject.scale.set(.025,.025,.025)","\t\t\t\t\tscene.add( object );","","\t\t\t\t}, onProgress, onError );","","\t\t\t}","","\t\t\tfunction onWindowResize() {","","\t\t\t\tcamera.aspect = window.innerWidth / window.innerHeight;","\t\t\t\tcamera.updateProjectionMatrix();","","\t\t\t\trenderer.setSize( window.innerWidth, window.innerHeight );","","\t\t\t\tcontrols.handleResize();","","\t\t\t}","\t\t\t//","","\t\t\tfunction animate() {","","\t\t\t\trequestAnimationFrame( animate );","","\t\t\t\trender();","\t\t\t\tstats.update();","","\t\t\t}","","\t\t\tfunction render() {","","                        \tcontrols.update( clock.getDelta() );","\t\t\t\trenderer.render( scene, camera );","","\t\t\t}","","\t\t</script>","","\t</body>","</html>",""]}]}]]},"ace":{"folds":[],"scrolltop":2640,"scrollleft":0,"selection":{"start":{"row":214,"column":0},"end":{"row":214,"column":0},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":187,"state":"js-start","mode":"ace/mode/html"}},"timestamp":1425812530000}